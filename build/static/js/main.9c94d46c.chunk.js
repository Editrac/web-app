(this["webpackJsonpediflo-web-app"]=this["webpackJsonpediflo-web-app"]||[]).push([[0],{1053:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),s=n(32),i=n.n(s),o=(n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(16)),l=n(38),d=n(76),j=n(307),b=n(131),u=n(163),m=n.n(u),x=n(5),f=n(108);!function(e){e.ADMIN="ADMIN",e.PROJECT_MANAGER="PROJECT_MANAGER",e.EDITOR="EDITOR"}(a||(a={}));var h,O="OTP_VALIDATE",p="AUTH_SET_PASSWORD",g="AUTH_SIGNIN",v="AUTH_SIGNOUT",N="UPDATE_USER",y="SET_AUTH_EVAPORATE_CLIENT",w={authenticated:!1,password:!1},S=Object(f.a)((function(e,t){switch(t.type){case O:return Object(x.a)(Object(x.a)({},e),t.payload);case g:return Object(x.a)(Object(x.a)(Object(x.a)({},e),t.payload),{},{password:!0,authenticated:!0});case p:return Object(x.a)(Object(x.a)({},e),{},{password:!0,authenticated:!0});case y:e._e_=t.payload._e_;break;case N:e.user=t.payload.user;break;case v:return w}}),w);!function(e){e.EVERYONE="EVERYONE",e.TEAM="TEAM"}(h||(h={}));var k,E,R,C,T="SET_PLAYER",_="ADD_COMMENT",I="SET_TIMESTAMP",z=Object(f.a)((function(e,t){switch(t.type){case T:e.comments=t.payload.comments;break;case _:e.comments.push(t.payload.comment);break;case I:e.timestamp=t.payload.timestamp}}),{comments:[],timestamp:0});!function(e){e.NEEDS_REVIEW="NEEDS_REVIEW",e.IN_PROGRESS="IN_PROGRESS",e.APPROVED="APPROVED",e.NO_STATUS="NO_STATUS"}(k||(k={})),function(e){e.PRODUCING="PRODUCING",e.EDITING="EDITING"}(E||(E={})),function(e){e.RADIO="RADIO",e.TEXT="TEXT"}(R||(R={})),function(e){e.PENDING="PENDING",e.IN_PROGRESS="IN_PROGRESS",e.REVIEW="REVIEW",e.REVISION="REVISION",e.COMPLETED="COMPLETED"}(C||(C={}));var A="SET_ORGANISATIONS",P="ADD_ORGANISATION",q="SET_SELECTED_ORGANISATION",D="SET_PROJECTS",M="ADD_PROJECT",F="SET_SELECTED_PROJECT",B="UPDATE_PROJECT",W="UPDATE_ORGANISATION",G="ADD_VIDEO_TO_PROJECT",V=Object(f.a)((function(e,t){var n;switch(t.type){case A:e.organisations=t.payload.organisations;break;case q:e.selectedOrganisation=t.payload;break;case P:e.organisations.push(t.payload.organisation);break;case D:e.organisations[t.payload.organisationIndex].projects=t.payload.projects,e.selectedOrganisation&&t.payload.organisationIndex===e.selectedOrganisation.index&&(e.selectedOrganisation.data.projects=t.payload.projects);break;case F:e.organisations[t.payload.organisationIndex].selectedProject=t.payload.selectedProject,t.payload.organisationIndex===(null===(n=e.selectedOrganisation)||void 0===n?void 0:n.index)&&(e.selectedOrganisation.data.selectedProject=t.payload.selectedProject);break;case G:e.selectedOrganisation&&e.selectedOrganisation.data.selectedProject&&e.selectedOrganisation.data.selectedProject.data.videos.push(t.payload);break;case M:e.organisations[t.payload.organisationIndex].projects.push(t.payload.project),e.selectedOrganisation&&t.payload.organisationIndex===e.selectedOrganisation.index&&e.selectedOrganisation.data.projects.push(t.payload.project);break;case B:e.selectedOrganisation&&e.selectedOrganisation.data.selectedProject&&(e.selectedOrganisation.data.selectedProject={index:e.selectedOrganisation.data.selectedProject.index,_id:t.payload.project._id,data:t.payload.project});break;case W:var a=e.organisations.findIndex((function(e,n){return e._id===t.payload.organisation._id}));a>=0&&(e.organisations[a]=t.payload.organisation,e.selectedOrganisation&&e.selectedOrganisation._id===t.payload.organisation._id&&(e.selectedOrganisation=Object(x.a)(Object(x.a)({},e.selectedOrganisation),{},{data:t.payload.organisation})))}}),{organisations:[]}),L={key:"ediflo",storage:m.a,blacklist:["organisationReducer","authReducer"]},U={key:"auth",storage:m.a},J={key:"organisation",storage:m.a,whitelist:["selectedOrganisation"]},H=Object(d.b)({authReducer:Object(b.a)(U,S),playerReducer:z,organisationReducer:Object(b.a)(J,V)}),X=Object(b.a)(L,H),Y=[j.a],K=[d.a.apply(void 0,Y)],$=function(){var e=Object(d.d)(X,d.c.apply(void 0,K));return{store:e,persistor:Object(b.b)(e)}}(),Q=n(12),Z=n(357),ee=n(1107),te=n(24),ne=n(0),ae=function(e){var t=e.children,n=Object(o.c)((function(e){return e.authReducer.authenticated}));return Object(ne.jsx)(ne.Fragment,{children:n?Object(ne.jsx)(te.a,{to:"/org"}):t})},re=function(e){var t=e.children,n=Object(o.c)((function(e){return e.authReducer})),a=n.authenticated,r=n.password;return Object(ne.jsx)(ne.Fragment,{children:a&&r?t:Object(ne.jsx)(te.a,{to:"/signin"})})},ce=function(){return Object(ne.jsxs)("div",{className:"absolute inset-0 bg-bg-dark",children:[Object(ne.jsx)("div",{className:"absolute inset-y-0 right-0",style:{background:"var(--accent-shade)",width:"45%"}}),Object(ne.jsxs)("div",{className:"absolute inset-y-0 left-0 p-12 overflow-y-auto overflow-x-hidden",style:{width:"55%"},children:[Object(ne.jsx)("div",{className:"text-xl flex items-center font-semibold justify-between",children:Object(ne.jsxs)("div",{className:"flex items-center",children:[Object(ne.jsx)("div",{className:"w-7 h-7 rounded-full bg-accent mr-2 flex items-center justify-center",children:Object(ne.jsx)("div",{className:"w-3 h-3 rounded-full bg-bg-dark m-auto"})}),Object(ne.jsx)("span",{children:"ediflo"})]})}),Object(ne.jsx)(te.b,{})]})]})};function se(e){return{type:I,payload:e}}var ie,oe,le=n(25),de=n.n(le),je=function(e){return de.a.get("/api/organisation/".concat(e,"/project"))},be=function(e){return de.a.get("/api/organisation/".concat(e.organisation,"/project/").concat(e.project))},ue=function(e){return de.a.post("/api/organisation/".concat(e.organisation,"/project/").concat(e.project,"/editor"),e.data)},me=function(e){return de.a.post("/api/organisation/".concat(e.organisation,"/project/").concat(e.project,"/manager"),e.data)},xe=function(e){return de.a.get("/api/video/".concat(e,"/comment"))},fe=function(e){return de.a.post("/api/video/".concat(e.video,"/comment"),e.data)},he=function(e){return de.a.post("/api/organisation/".concat(e.organisation,"/project"),e.data)},Oe=function(e){return de.a.post("/api/organisation/".concat(e.organisation,"/project/").concat(e.project,"/task"),e.data)},pe=function(e){return de.a.post("/api/organisation/".concat(e.organisation,"/project/").concat(e.project,"/task/").concat(e.task,"/video"),e.data)},ge=function(e){return de.a.get("/api/organisation/".concat(e.organisation,"/project/").concat(e.project,"/task/").concat(e.task))},ve=function(e){return de.a.put("/api/organisation/".concat(e.organisation,"/project/").concat(e.project,"/task/").concat(e.task,"/status"),e.data)},Ne=function(e,t){var n=Object(r.useState)(),a=Object(Q.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(),o=Object(Q.a)(i,2),l=o[0],d=o[1],j=Object(r.useState)(!1),b=Object(Q.a)(j,2),u=b[0],m=b[1];return{mutate:function(n){m(!0),e(n).then((function(e){s(e.data),t&&t.onSuccess&&t.onSuccess(e.data,n)})).catch((function(e){d(e),t&&t.onError&&t.onError(e)})).finally((function(){m(!1)}))},response:c,error:l,loading:u}},ye=function(e,t){var n=Object(r.useState)(),a=Object(Q.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(),o=Object(Q.a)(i,2),l=o[0],d=o[1],j=Object(r.useState)(!1),b=Object(Q.a)(j,2),u=b[0],m=b[1];return{query:function(n){m(!0),e(n).then((function(e){s(e.data),t&&t.onSuccess&&t.onSuccess(e.data,n)})).catch((function(e){d(e),t&&t.onError&&t.onError(e)})).finally((function(){m(!1)}))},response:c,error:l,loading:u}},we=n(68),Se=n.n(we),ke=function(e){var t=Math.floor(e),n=Math.floor(t/3600);t%=3600;var a=Math.floor(t/60),r=t%60,c=Math.floor(e%1*1e3);return"".concat(n>0?String(n).padStart(2,"0"):"").concat(n>0?":":"").concat(String(a).padStart(2,"0"),":").concat(String(r).padStart(2,"0"),":").concat(String(c).padStart(3,"0"))},Ee=function(e){var t=Se()().diff(Se()(e),"y");if(t>0)return"".concat(t,"yr");var n=Se()().diff(Se()(e),"M");if(n>0)return"".concat(n,"mo");var a=Se()().diff(Se()(e),"h");if(a>36){var r=Se()().diff(Se()(e),"d");return"".concat(r,"d")}if(a>1)return"".concat(a,"h");var c=Se()().diff(Se()(e),"m");return"".concat(c,"m")},Re=n(88),Ce=n(1124),Te=n(1096),_e=n(1059),Ie=n(43),ze=n.n(Ie),Ae=n(308),Pe=n.n(Ae),qe=n(309),De=n.n(qe),Me=n(310),Fe=n.n(Me),Be=n(152),We=n.n(Be),Ge=n(311),Ve=n.n(Ge),Le=n(1055),Ue=n(1058);!function(e){e.ERROR="error",e.INFORMATION="information",e.SUCCESS="success",e.WARNING="warning",e.COPIED="Copied"}(oe||(oe={}));var Je=(ie={},Object(Re.a)(ie,oe.ERROR,Pe.a),Object(Re.a)(ie,oe.INFORMATION,De.a),Object(Re.a)(ie,oe.SUCCESS,We.a),Object(Re.a)(ie,oe.WARNING,Fe.a),Object(Re.a)(ie,oe.COPIED,Ve.a),ie),He=(Object(Le.a)((function(){return Object(Ue.a)({root:{},switchBase:{padding:4,color:"var(--grey-1)","&$checked":{transform:"translateX(12px)",color:"#fff","& + $track":{opacity:1,backgroundColor:"var(--accent)",borderColor:"var(--accent)"}}},thumb:{width:14,height:14,boxShadow:"none",backgroundColor:"var(--grey-5)"},track:{border:"1px solid var(--grey-2)",borderRadius:11,height:22,opacity:1,backgroundColor:"var(--bg-bg)"},checked:{}})}))(Ce.a),c.a.createContext((function(){}))),Xe=function(){return Object(r.useContext)(He)},Ye=function(e){var t=e.children,n=Object(r.useState)({visible:!1,variant:oe.SUCCESS,quick:!1,message:""}),a=Object(Q.a)(n,2),c=a[0],s=a[1],i=Je[c.variant],o=function(){s(Object(x.a)(Object(x.a)({},c),{},{visible:!1}))};return Object(ne.jsxs)(He.Provider,{value:s,children:[t,Object(ne.jsx)(Ce.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:c.visible,onClose:o,autoHideDuration:1e3,children:Object(ne.jsx)(Te.a,{style:Object(x.a)({padding:"0 1rem"},function(e){switch(e){case oe.ERROR:return{backgroundColor:"var(--error-red)"};case oe.INFORMATION:case oe.SUCCESS:case oe.WARNING:default:return{backgroundColor:"var(--success-green)"}}}(c.variant)),className:"",message:Object(ne.jsxs)("span",{id:"client-snackbar",className:"flex items-center text-sm font-semibold",children:[Object(ne.jsx)(i,{fontSize:"inherit"}),Object(ne.jsx)("span",{className:"ml-2",children:c.message})]}),action:[Object(ne.jsx)(_e.a,{"aria-label":"close",color:"secondary",size:"small",onClick:o,children:Object(ne.jsx)(ze.a,{fontSize:"small"})},"close")]})})]})},Ke=function(e){var t=Object(r.useState)(-1),n=Object(Q.a)(t,2),a=n[0],c=n[1],s=Xe(),i=Object(o.b)(),l=Object(o.c)((function(e){return e.authReducer})).user,d=Object(o.c)((function(e){return e.playerReducer})).comments,j=ye(xe,{onSuccess:function(e){var t=e.data.videoComments||[];i({type:T,payload:{timestamp:-1,comments:t}})}}).query;Object(r.useEffect)((function(){j(e.videoId)}),[]);return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("div",{className:"p-4",children:Object(ne.jsxs)("div",{className:"flex items-center ",children:[Object(ne.jsx)("div",{className:"rounded-full w-10 h-10 bg-bg-light overflow-hidden",children:Object(ne.jsx)("img",{className:"w-full h-full object-cover",src:null===l||void 0===l?void 0:l.picture})}),Object(ne.jsxs)("div",{className:"flex flex-1 ml-2 flex-col",children:[Object(ne.jsxs)("span",{className:"text-sm font-semibold",children:[null===l||void 0===l?void 0:l.firstName," ",null===l||void 0===l?void 0:l.lastName]}),Object(ne.jsx)("span",{className:"text-xs text-grey-5",children:"Online"})]})]})}),Object(ne.jsx)("div",{className:"flex justify-center border-t border-grey-0 pt-1",children:Object(ne.jsxs)("div",{className:" flex text-sm font-semibold",children:[Object(ne.jsxs)("div",{className:"mx-2 px-2 py-2 border-b-2 border-accent text-accent",children:[d.length," Comments"]}),Object(ne.jsx)("div",{className:"mx-2 px-2 py-2",children:"File Info"})]})}),Object(ne.jsx)("div",{className:"p-4 pt-0",children:d.map((function(e,t){return Object(ne.jsx)("div",{className:"rounded-xl mb-2 overflow-hidden",children:Object(ne.jsxs)("div",{onClick:function(){return function(e,t){navigator.clipboard.writeText("".concat(e)),s({visible:!0,message:"Timestamp copied!",variant:oe.SUCCESS}),i(se({timestamp:e})),c(t)}(e.timestamp,t)},className:"p-3 hover:bg-bg-light cursor-pointer bg-bg relative",style:t===a?{backgroundColor:"var(--bg-lightest)"}:{},children:[Object(ne.jsx)("div",{className:"absolute inset-y-0 w-1 left-0 bg-accent transition-transform transform ".concat(t!==a&&"-translate-x-1")}),Object(ne.jsxs)("div",{className:"flex items-center ",children:[Object(ne.jsx)("div",{className:"rounded-full w-7 h-7 bg-bg-light overflow-hidden",children:Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-xs",children:Object(ne.jsxs)("span",{children:[e.user.firstName[0],e.user.lastName[0]]})})}),Object(ne.jsxs)("div",{className:"flex flex-1 ml-2 items-center",children:[Object(ne.jsxs)("span",{className:"text-sm font-semibold",children:[e.user.firstName," ",e.user.lastName]}),Object(ne.jsx)("span",{className:"text-xs text-grey-5 ml-2",children:Ee(e.createdAt)})]})]}),Object(ne.jsxs)("div",{className:"text-sm pt-2",children:[e.timestamp>=0&&Object(ne.jsx)("span",{className:"mr-2 font-semibold text-accent",children:ke(e.timestamp)}),e.text]})]})},t)}))})]})},$e=n(71),Qe=(n(179),n(318)),Ze=n.n(Qe),et=n(319),tt=n.n(et),nt=n(322),at=n.n(nt),rt=n(321),ct=n.n(rt),st=n(323),it=n.n(st),ot=n(317),lt=n.n(ot),dt=n(320),jt=n.n(dt),bt=n(1101),ut=n(1097),mt=n(1098),xt=n(9),ft=(n(1122),n(363)),ht=n(1102),Ot=n(1126),pt=(Object(ut.a)((function(){return Object(mt.a)({root:{backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"},"&$focused":{backgroundColor:"transparent"}},focused:{}})})),Object(ut.a)({bold:{fontWeight:"bold"},subHeadline:{fontSize:16,paddingTop:10,fontWeight:500},sandwitchText:{margin:"0 0 15px 0",fontWeight:500},button:{borderRadius:15,fontSize:14,padding:"12px 0",margin:"5px 0 20px 0"},smallgutter:{marginTop:30}}),Object(xt.a)((function(){return Object(mt.a)({root:{marginTop:"0.375rem",padding:"0 !important"},input:{height:"initial",borderRadius:"8px !important",position:"relative",backgroundColor:"var(--bg)",border:"1px solid var(--bg)",fontSize:14,padding:"10px 12px",minHeight:"initial",color:"var(--text-primary)","&:focus":{border:"1px solid var(--accent)"}},error:{"& input":{borderColor:"var(--text-error)",color:"var(--text-error)"},"& textarea":{borderColor:"var(--text-error)",color:"var(--text-error)"},"& .MuiSelect-select":{bborderColor:"var(--text-error)",color:"var(--text-error)",backgroundColor:"var(--bg-dark)"},"&:focus":{borderColor:"var(--text-error)"}}})}))(ft.a)),gt=Object(xt.a)((function(){return Object(mt.a)({root:{width:34,height:22,padding:0,display:"flex"},switchBase:{padding:4,color:"var(--grey-1)","&$checked":{transform:"translateX(12px)",color:"#fff","& + $track":{opacity:1,backgroundColor:"var(--accent)",borderColor:"var(--accent)"}}},thumb:{width:14,height:14,boxShadow:"none",backgroundColor:"var(--grey-5)"},track:{border:"1px solid var(--grey-2)",borderRadius:11,height:22,opacity:1,backgroundColor:"var(--bg-bg)"},checked:{}})}))(ht.a),vt=Object(xt.a)({root:{color:"var(--accent)",height:4,padding:0},thumb:{height:10,width:10,backgroundColor:"#fff",marginTop:-3,marginLeft:-3,"&:focus, &:hover, &$active":{boxShadow:"inherit"},"&:after":{display:"none"}},track:{height:4,borderRadius:2},rail:{height:4,borderRadius:2,backgroundColor:"var(--grey-2)"}})(Ot.a),Nt=n(210),yt=n.n(Nt),wt=function(e){var t,n,a,c,s,i,l=Object(o.c)((function(e){return e.playerReducer.timestamp})),d=e.player,j=Object(r.useMemo)((function(){var e,t;return{paused:null===d||void 0===d||null===(e=d.current)||void 0===e?void 0:e.paused(),muted:null===d||void 0===d||null===(t=d.current)||void 0===t?void 0:t.muted(),fullScreen:!1}}),[]),b=Object(r.useState)(null===d||void 0===d||null===(t=d.current)||void 0===t?void 0:t.paused()),u=Object(Q.a)(b,2),m=u[0],f=u[1],h=Object(r.useState)((null===d||void 0===d||null===(n=d.current)||void 0===n?void 0:n.volume())||0),O=Object(Q.a)(h,2),p=O[0],g=O[1],v=Object(r.useState)(!1),N=Object(Q.a)(v,2),y=N[0],w=N[1],S=Object(r.useState)({anchorEl:null,rate:1}),k=Object(Q.a)(S,2),E=k[0],R=k[1],C=Boolean(E.anchorEl);Object(r.useEffect)((function(){var e;l>=0&&(null===d||void 0===d||null===(e=d.current)||void 0===e||e.currentTime(l))}),[l]);var T=function(e){var t,n,a;"FORWARD"===e?null===d||void 0===d||null===(t=d.current)||void 0===t||t.currentTime((null===d||void 0===d||null===(n=d.current)||void 0===n?void 0:n.currentTime())+10):null===d||void 0===d||null===(a=d.current)||void 0===a||a.currentTime(d.current.currentTime()-10),w(!y)};return null===d||void 0===d||null===(a=d.current)||void 0===a||a.on("fullscreenchange",(function(){j.fullScreen?(document.getElementsByClassName("vjs-control-bar")[0].classList.add("hidden"),j.fullScreen=!1):(document.getElementsByClassName("vjs-control-bar")[0].classList.remove("hidden"),j.fullScreen=!0)})),null===d||void 0===d||null===(c=d.current)||void 0===c||c.on("ended",(function(){j.paused||(j.paused=!0,f(j.paused))})),null===d||void 0===d||null===(s=d.current)||void 0===s||s.on("play",(function(){j.paused&&(j.paused=!1,f(j.paused))})),null===d||void 0===d||null===(i=d.current)||void 0===i||i.on("pause",(function(){j.paused||(j.paused=!0,f(j.paused))})),Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsxs)("div",{className:"h-10 flex items-center border-t border-grey-0 border-dashed px-2",children:[Object(ne.jsxs)(bt.a,{id:"SPEED_CONTROL_POPOVER",open:C,anchorEl:E.anchorEl,onClose:function(){R(Object(x.a)(Object(x.a)({},E),{},{anchorEl:null}))},elevation:8,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:[Object(ne.jsx)("p",{className:"pt-3 px-4 bg-bg text-xs font-bold text-white",children:"Playback Speed"}),Object(ne.jsx)("div",{className:"px-2 py-2 bg-bg flex items-center",children:[.25,.5,.75,1,1.25,1.5,1.75,2].map((function(e,t){return Object(ne.jsx)("div",{className:"mx-2",children:Object(ne.jsx)(_e.a,{onClick:function(){return function(e){var t;null===d||void 0===d||null===(t=d.current)||void 0===t||t.playbackRate(e),R({rate:e,anchorEl:null})}(e)},"aria-label":"delete",size:"small",color:"secondary",children:Object(ne.jsxs)("div",{className:"w-6 h-6 flex items-center justify-center text-xs ".concat(E.rate===e?"underline font-bold":""),children:[e,"x"]})})},t)}))})]}),Object(ne.jsx)("div",{children:Object(ne.jsx)(_e.a,{onClick:function(){return T("BACKWARD")},"aria-label":"delete",size:"small",color:"secondary",children:Object(ne.jsx)(lt.a,{style:{fontSize:20}})})}),Object(ne.jsx)("div",{className:"ml-1",children:Object(ne.jsx)(_e.a,{onClick:function(){var e,t;j.paused?null===d||void 0===d||null===(e=d.current)||void 0===e||e.play():null===d||void 0===d||null===(t=d.current)||void 0===t||t.pause()},"aria-label":"delete",size:"small",color:"secondary",children:m?Object(ne.jsx)(Ze.a,{style:{fontSize:28}}):Object(ne.jsx)(tt.a,{style:{fontSize:28}})})}),Object(ne.jsx)("div",{className:"ml-1",children:Object(ne.jsx)(_e.a,{onClick:function(){return T("FORWARD")},"aria-label":"delete",size:"small",color:"secondary",children:Object(ne.jsx)(jt.a,{style:{fontSize:20}})})}),Object(ne.jsxs)("div",{className:"".concat(yt.a.volumeConrolWrap," ml-2 flex items-center"),children:[Object(ne.jsx)(_e.a,{onClick:function(){var e,t,n;p?(null===d||void 0===d||null===(e=d.current)||void 0===e||e.muted(!0),g(0)):(null===d||void 0===d||null===(t=d.current)||void 0===t||t.muted(!1),null===d||void 0===d||null===(n=d.current)||void 0===n||n.volume(.5),g(.5))},"aria-label":"delete",size:"small",color:"secondary",children:p?Object(ne.jsx)(at.a,{style:{fontSize:22}}):Object(ne.jsx)(ct.a,{style:{fontSize:20}})}),Object(ne.jsx)("div",{className:"".concat(yt.a.volumeSlider," flex items-center ml-1"),children:Object(ne.jsx)(vt,{onChange:function(e,t){return function(e){var t;null===d||void 0===d||null===(t=d.current)||void 0===t||t.volume(e),g(e)}(t)},value:p,"aria-label":"pretto slider",defaultValue:1,max:1,min:0,step:.05})})]}),Object(ne.jsx)("div",{className:"flex flex-1"}),Object(ne.jsx)("div",{className:"ml-1",children:Object(ne.jsx)(_e.a,{onClick:function(e){R(Object(x.a)(Object(x.a)({},E),{},{anchorEl:e.currentTarget}))},"aria-label":"delete",size:"small",color:"secondary",children:Object(ne.jsxs)("div",{className:"w-6 h-6 flex items-center justify-center text-sm font-semibold",children:[E.rate,"x"]})})}),Object(ne.jsx)("span",{className:"px-1"}),Object(ne.jsx)("div",{className:"ml-1",children:Object(ne.jsx)(_e.a,{onClick:function(){var e;null===d||void 0===d||null===(e=d.current)||void 0===e||e.requestFullscreen()},"aria-label":"delete",size:"small",color:"secondary",children:Object(ne.jsx)(it.a,{style:{fontSize:24}})})})]})})},St=n(60),kt=n.n(St),Et=n(89),Rt=n.n(Et),Ct=function(e){return Object(ne.jsx)("button",{type:e.type,onClick:e.onClick,className:kt()(Rt.a.button,Rt.a[e.variant],Rt.a[e.size],e.round&&Rt.a.round,e.thick&&Rt.a.thick,e.fullWidth&&Rt.a.fullWidth),style:e.styles,children:Object(ne.jsx)("span",{className:Rt.a.buttonText,children:e.children})})},Tt=n(334),_t=n.n(Tt),It=n(1061),zt=n(1103),At=function(e,t){return function(t){var n=(e.timestamp-e.timestamp%60)/60,a=parseInt("".concat(e.timestamp%60));return Object(ne.jsx)(It.a,Object(x.a)(Object(x.a)({},t),{},{transition:!0,children:Object(ne.jsxs)("div",{className:"mb-2 py-3 px-4 rounded-xl text-xs",style:{maxWidth:300,backgroundColor:"var(--bgsolid)"},children:[Object(ne.jsxs)("div",{className:"flex items-center mb-1 font-semibold",children:[Object(ne.jsx)("div",{className:"h-6 w-6 bg-bg-light z-0 rounded-full overflow-hidden mr-2",children:Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center",style:{fontSize:10},children:Object(ne.jsxs)("span",{children:[e.user.firstName[0],e.user.lastName[0]]})})}),Object(ne.jsxs)("span",{children:[e.user.firstName," ",e.user.lastName]})]}),Object(ne.jsxs)("div",{children:[Object(ne.jsx)("span",{className:"mr-2 font-semibold text-accent",children:"".concat(n>=10?n:"0".concat(n),":").concat(a>=10?a:"0".concat(a))}),e.text]})]})}))}},Pt=function(e){var t=Object(o.c)((function(e){return e.playerReducer})).comments,n=e.player,a=["#00E6F0","#00FF00","#FFFF00","#FF6800","#E55151"],r=parseInt(window.getComputedStyle(document.body).fontSize.slice(0,-2)),c=Object(o.b)();return Object(ne.jsx)("div",{className:"flex h-8 flex-col relative",children:t.map((function(t,s){var i=n.current.duration(),o=e.dimentions[0]*r,l=o*(t.timestamp/i);if(l<10&&(l=10),l>o-10&&(l=o-10),t.timestamp>0)return Object(ne.jsx)(zt.a,{placement:"top",PopperComponent:At(t),title:t.text,children:Object(ne.jsx)("button",{onClick:function(){return e=t.timestamp,void c(se({timestamp:e}));var e},className:"bg-bg-dark z-0 rounded-full overflow-hidden absolute top-1.5 cursor-pointer hover:bg-bg hover:z-10 left-0 opacity-70 focus:opacity-100",style:{width:20,height:20,left:l,borderWidth:1,borderColor:a[parseInt("".concat(4*Math.random()))],transform:"translateX(-10px)"},children:Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center",style:{fontSize:10},children:Object(ne.jsxs)("span",{children:[t.user.firstName[0],t.user.lastName[0]]})})})},s)}))})},qt=n(331),Dt=n.n(qt),Mt=n(15),Ft=n(332),Bt=n.n(Ft),Wt=n(333),Gt=n.n(Wt),Vt=n(330),Lt=n.n(Vt),Ut=n(14),Jt=n(1104),Ht=function(e){var t,n,a=e.player,c=Object(o.b)(),s=Object(o.c)((function(e){return e.authReducer})).user,i=Object(r.useState)(null===a||void 0===a||null===(t=a.current)||void 0===t?void 0:t.currentTime()),l=Object(Q.a)(i,2),d=l[0],j=l[1],b=Ne(fe,{onSuccess:function(e){var t=e.data.videoComment;c({type:_,payload:{comment:t}})}}),u=b.mutate,m=b.loading,f=Mt.b().shape({text:Mt.c().required()});return null===a||void 0===a||null===(n=a.current)||void 0===n||n.on("timeupdate",(function(){var e;j(null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.currentTime())})),Object(ne.jsx)(Ut.d,{enableReinitialize:!0,initialValues:{timestamp:d,text:"",visibility:h.EVERYONE},validationSchema:f,onSubmit:function(t){u({video:e.videoId,data:{text:t.text,timestamp:null!==d&&void 0!==d?d:-1,visibility:t.visibility}}),t.text=""},children:function(e){return Object(ne.jsxs)("form",{onSubmit:e.handleSubmit,className:"flex items-center h-full px-4 py-4",children:[Object(ne.jsx)("div",{className:"rounded-full w-8 h-8 bg-bg-light overflow-hidden",children:Object(ne.jsx)("img",{className:"w-full h-full object-covert",src:null===s||void 0===s?void 0:s.picture})}),Object(ne.jsxs)("div",{className:"pr-2 pl-1 py-1 flex items-center rounded-md bg-bg-dark text-sm ml-4 border cursor-pointer hover:text-accent ".concat(d?"text-accent border-accent":"text-grey-2 border-grey-2"),children:[Object(ne.jsxs)("span",{className:"mr-1 flex items-center",children:[Object(ne.jsx)(Lt.a,{fontSize:"inherit",color:"inherit"}),Object(ne.jsx)("span",{className:"ml-1 ",children:d?"".concat(ke(d)):"time"})]}),!!d&&Object(ne.jsx)(Dt.a,{fontSize:"inherit",color:"inherit"})]}),Object(ne.jsx)("div",{className:"text-sm ml-4 text-grey-5 flex flex-1 text-white",children:Object(ne.jsx)(Ut.a,{name:"text",children:function(t){var n=t.field,r=t.meta;r.touched,r.error;return Object(ne.jsx)(ft.a,Object(x.a)(Object(x.a)({},n),{},{style:{color:"#fff",fontSize:"inherit"},placeholder:"Type your comment here",inputProps:{"aria-label":"Type your comment here"},fullWidth:!0,onFocus:function(){var e;return null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.pause()},multiline:!0,rowsMax:4,onKeyPress:function(t){"Enter"===t.key&&(t.preventDefault(),e.handleSubmit())},onChange:function(t){e.setFieldValue("text",t.target.value)}}))}})}),Object(ne.jsxs)("div",{className:"pr-1 pl-1 py-1 flex items-center rounded-md bg-bg-dark text-sm ml-4 mr-2 border border-accent",children:[Object(ne.jsx)("span",{className:"ml-1",children:"Everyone"}),Object(ne.jsx)(Bt.a,{fontSize:"inherit"})]}),Object(ne.jsx)(Ct,{type:"submit",size:"regular",variant:"fill-accent",title:"Send",children:m?Object(ne.jsx)(Jt.a,{color:"secondary",size:14,thickness:4}):Object(ne.jsx)(Gt.a,{fontSize:"inherit"})})]})}})},Xt=n(73),Yt=n.n(Xt),Kt=n(159),$t=n.n(Kt),Qt=[{name:k.NEEDS_REVIEW,icon:Object(ne.jsx)(Yt.a,{color:"inherit",fontSize:"inherit"}),color:"#ffa500",label:"Needs Review"},{name:k.IN_PROGRESS,icon:Object(ne.jsx)($t.a,{color:"inherit",fontSize:"inherit"}),color:"#2b9cff",label:"In Progress"},{name:k.APPROVED,icon:Object(ne.jsx)(We.a,{color:"inherit",fontSize:"inherit"}),color:"#00cf71",label:"Approved"},{name:k.NO_STATUS,icon:Object(ne.jsx)(Yt.a,{color:"inherit",fontSize:"inherit"}),color:"#848484",label:"No Status"}],Zt=(n(526),function(e){var t,n,a,c=Object(te.h)(),s=Object(r.useRef)(null),i=Object(r.useRef)(null),o=Object(r.useState)(!1),l=Object(Q.a)(o,2),d=l[0],j=l[1],b=Object(r.useState)(null),u=Object(Q.a)(b,2),m=u[0],x=u[1],f=Object(r.useState)(e.projectTask.status),h=Object(Q.a)(f,2),O=h[0],p=h[1],g=Ne(ve).mutate,v=function(){x(null)},N=Boolean(m),y={autoplay:!1,controls:!0,responsive:!0,fluid:!0,muted:!1,defaultVolume:1,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],controlBar:{pictureInPictureToggle:!1},userActions:{doubleClick:!1,hotkeys:!0},bigPlayButton:!1,inactivityTimeout:0,sources:[{src:e.video.file,type:"application/x-mpegURL"}],html5:{vhs:{overrideNative:!0},nativeAudioTracks:!1,nativeVideoTracks:!1}},w=function(e){$e.a.log("player is ready");var t=document.getElementsByClassName("vjs-control-bar");t[0]&&t[0].classList.add("hidden");var n=e.qualityLevels();n.on("addqualitylevel",(function(e){var t=e.qualityLevel;t.height>=720?t.enabled=!0:t.enabled=!1})),n.on("change",(function(){console.log("Quality Level changed!"),console.log("New level:",n[n.selectedIndex])}))};return Object(r.useEffect)((function(){if(!i.current){var e=s.current;if(!e)return;var t=i.current=Object($e.a)(e,y,(function(){w(t)}))}i.current&&w(i.current)}),[s]),Object(r.useEffect)((function(){var e=i.current;return function(){e&&(e.dispose(),i.current=null)}}),[i]),Object(r.useEffect)((function(){O&&O!==e.projectTask.status&&g({organisation:e.organisation,project:e.projectTask.project,task:e.projectTask._id,data:{status:O}})}),[O,e.projectTask]),Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("div",{className:"flex flex-col flex-1 justify-center items-center",children:Object(ne.jsxs)("div",{className:"bg-bg relative mb-12",style:{width:"".concat(e.dimentions[0],"rem"),height:"".concat(e.dimentions[1],"rem")},children:[Object(ne.jsx)("div",{className:"absolute -top-12 inset-x-0 h-12 flex flex-col bg-accent rounded-t-xl border-b border-bg-dark",style:{background:"var(--accent-shade)"},children:Object(ne.jsxs)("div",{className:"px-4 h-full flex items-center",children:[Object(ne.jsx)(_e.a,{onClick:function(){return c(-1)},"aria-label":"delete",size:"small",color:"secondary",edge:"start",children:Object(ne.jsx)(_t.a,{fontSize:"default"})}),Object(ne.jsx)("span",{className:"text-sm font-semibold ml-3",children:e.video.name}),Object(ne.jsx)("div",{className:"flex flex-1 justify-end text-sm ",children:Object(ne.jsx)(Ct,{onClick:function(e){return function(e){x(e.currentTarget)}(e)},type:"button",size:"regular",variant:"text-white",children:Object(ne.jsxs)("span",{className:"flex items-center text-sm",style:{color:(null===(t=Qt.find((function(e){return e.name===O})))||void 0===t?void 0:t.color)||"initial"},children:[(null===(n=Qt.find((function(e){return e.name===O})))||void 0===n?void 0:n.icon)||null,Object(ne.jsx)("span",{className:"ml-1 text-primary",children:(null===(a=Qt.find((function(e){return e.name===O})))||void 0===a?void 0:a.label)||""})]})})}),Object(ne.jsx)(bt.a,{id:"APP_HEADER_POPOVER",open:N,anchorEl:m,onClose:v,elevation:8,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(ne.jsx)("div",{className:"bg-bg-dark text-primary rounded-xl overflow-hidden",children:Object(ne.jsx)("div",{className:"bg-bg-light",children:Object(ne.jsx)("div",{className:"bg-bg-light w-40",children:Qt.map((function(e,t){return Object(ne.jsxs)("div",{onClick:function(){p(e.name),v()},className:"py-3 px-4 ".concat(t<Qt.length-1&&"border-b border-bg-dark"," text-sm cursor-pointer hover:bg-bg flex items-center"),style:{color:e.color},children:[e.icon,Object(ne.jsx)("span",{className:"ml-1 text-primary",children:e.label})]},t)}))})})})})]})}),Object(ne.jsx)("div",{className:"w-full h-full overflow-hidden",children:Object(ne.jsx)("div",{"data-vjs-player":!0,children:Object(ne.jsx)("video",{onLoadedMetadata:function(){return j(!0)},ref:s,className:"video-js vjs-big-play-centered"})})}),Object(ne.jsx)("div",{className:"absolute -bottom-18 inset-x-0 flex flex-col bg-bg rounded-b-xl border-t border-bg-dark",children:i.current&&d&&Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(Pt,{player:i,dimentions:e.dimentions}),Object(ne.jsx)(wt,{player:i})]})})]})}),Object(ne.jsx)("div",{className:"h-24 flex justify-center mt-6 pt-2",children:Object(ne.jsx)("div",{className:"h-full bg-bg-light w-full",children:i.current&&d&&Object(ne.jsx)(Ht,{videoId:e.video._id,player:i})})})]})}),en=c.a.memo(Zt),tn=n(344),nn=n.n(tn),an=n(342),rn=n.n(an),cn=n(343),sn=n.n(cn),on=n(1120);function ln(){return{type:v}}function dn(e){return{type:N,payload:e}}var jn=n(1123),bn=n(162),un=function(e){return de.a.put("/api/user/".concat(e.user),e.data)},mn=n(341),xn=n.n(mn),fn=n(339),hn=n.n(fn),On=n(340),pn=n.n(On),gn=n(338),vn=n.n(gn),Nn=n(1118),yn=n(1105),wn=function(e){return de.a.post("/api/user",e)},Sn=function(){return de.a.get("/api/user")},kn=function(){return de.a.get("/api/organisation")},En=function(e){return de.a.post("/api/organisation",e)},Rn=function(e){return de.a.put("/api/organisation/".concat(e.organisation),e.data)},Cn=function(e){return de.a.get("/organisation/".concat(e.organisation,"/ptemplate"))},Tn=function(e){return de.a.post("/organisation/".concat(e.organisation,"/ptemplate"),e.data)},_n=function(e){return de.a.put("/organisation/".concat(e.organisation,"/ptemplate/").concat(e.template),e.data)},In=function(e){Object(o.b)();var t=Ne(wn,{onSuccess:function(e){c(!0)}}),n=t.mutate,r=t.loading,c=function(t){e.setOpen(!1,t)},s=Mt.b().shape({email:Mt.c().email().required(),firstName:Mt.c().required(),lastName:Mt.c().required(),role:Mt.c().required()});return Object(ne.jsx)(jn.a,{open:e.open,onClose:function(){return c(!1)},scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:Object(ne.jsx)(Ut.d,{enableReinitialize:!0,initialValues:{email:"",firstName:"",lastName:"",role:e.role},validationSchema:s,onSubmit:function(e){n(e)},children:function(t){return Object(ne.jsx)(Ut.c,{className:"bg-bg-dark text-primary rounded-xl overflow-hidden",children:Object(ne.jsxs)("div",{className:"bg-bg-light w-96",children:[Object(ne.jsxs)("div",{className:"text-base font-bold py-3 px-7 border-b border-bg-dark flex items-center justify-between",children:[Object(ne.jsx)("span",{children:e.role===a.PROJECT_MANAGER?"Add a project manager":"Add an editor"}),Object(ne.jsx)(_e.a,{onClick:function(){return c(!1)},edge:"end","aria-label":"options",size:"small",color:"secondary",children:Object(ne.jsx)(ze.a,{style:{fontSize:16}})})]}),Object(ne.jsxs)("div",{className:"p-6",children:[Object(ne.jsx)(Ut.a,{name:"email",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-sm font-semibold px-1 flex justify-between",children:[Object(ne.jsx)("span",{children:"Email"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Enter your email here",fullWidth:!0,error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("div",{className:"mt-6"}),Object(ne.jsxs)("p",{className:"text-sm font-semibold px-1 flex justify-between",children:[Object(ne.jsx)("span",{children:"Name"}),(t.touched.firstName&&Boolean(t.errors.firstName)||t.touched.lastName&&Boolean(t.errors.lastName))&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsxs)("div",{className:"flex",children:[Object(ne.jsx)(Ut.a,{name:"firstName",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"First Name",fullWidth:!0,error:a&&Boolean(r)}))}}),Object(ne.jsx)("span",{className:"px-1"}),Object(ne.jsx)(Ut.a,{name:"lastName",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Last Name",fullWidth:!0,error:a&&Boolean(r)}))}})]}),Object(ne.jsx)("div",{className:"pt-8",children:Object(ne.jsx)(Ct,{type:"submit",size:"large",variant:"fill-accent",fullWidth:!0,children:r?Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5}):Object(ne.jsx)("strong",{className:"text-sm",children:"Add \u2192"})})})]})]})})}})})},zn=function(e){var t=e.allowedRoles,n=e.organisationType,a=e.children,r=Object(o.c)((function(e){return e.authReducer})).user;return r&&t.includes(r.role)?n&&r.organisation.organisationType!==n?Object(ne.jsx)(ne.Fragment,{}):Object(ne.jsx)(ne.Fragment,{children:a}):Object(ne.jsx)(ne.Fragment,{})},An=Object(xt.a)({root:{backgroundColor:"transparent"},indicator:{height:3,borderTopLeftRadius:4,borderTopRightRadius:4,backgroundColor:"var(--accent)"}})(Nn.a),Pn=Object(xt.a)({root:{textTransform:"none",fontSize:16,minWidth:"60px !important",color:"#fff","&:hover":{color:"var(--accent)",opacity:1},"&$selected":{color:"var(--accent)"}},selected:{}})(yn.a),qn=function(){Object(te.h)();var e=Object(o.c)((function(e){return e.authReducer})).user,t=c.a.useState((null===e||void 0===e?void 0:e.role)===a.ADMIN?0:1),n=Object(Q.a)(t,2),s=n[0],i=n[1],l=Object(r.useState)([]),d=Object(Q.a)(l,2),j=d[0],b=d[1],u=Object(r.useState)({open:!1,role:a.PROJECT_MANAGER,reload:!0}),m=Object(Q.a)(u,2),f=m[0],h=m[1],O=ye(Sn,{onSuccess:function(e){b(e.data.users)}}),p=O.query,g=O.loading;Object(r.useEffect)((function(){f.reload&&p()}),[f.reload]);var v=function(e,t){i(t)};return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("div",{className:"text-center border-b border-bg m-auto",children:[Object(ne.jsx)(zn,{allowedRoles:[a.ADMIN],organisationType:E.EDITING,children:Object(ne.jsxs)(An,{centered:!0,value:s,onChange:v,children:[Object(ne.jsx)(Pn,{value:0,disableRipple:!0,label:"Admins"}),Object(ne.jsx)(Pn,{value:1,disableRipple:!0,label:"Project Managers"}),Object(ne.jsx)(Pn,{value:2,disableRipple:!0,label:"Editors"})]})}),Object(ne.jsx)(zn,{allowedRoles:[a.PROJECT_MANAGER],organisationType:E.EDITING,children:Object(ne.jsxs)(An,{centered:!0,value:s,onChange:v,children:[Object(ne.jsx)(Pn,{value:1,disableRipple:!0,label:"Project Managers"}),Object(ne.jsx)(Pn,{value:2,disableRipple:!0,label:"Editors"})]})}),Object(ne.jsx)(zn,{allowedRoles:[a.ADMIN],organisationType:E.PRODUCING,children:Object(ne.jsx)(An,{centered:!0,value:s,onChange:v,children:Object(ne.jsx)(Pn,{value:0,disableRipple:!0,label:"Admins"})})})]}),Object(ne.jsxs)("div",{className:"max-w-sm mt-10 mx-auto",children:[Object(ne.jsx)(zn,{allowedRoles:[a.ADMIN],children:Object(ne.jsxs)("div",{className:"",style:{display:0===s?"block":"none"},children:[Object(ne.jsxs)("p",{className:"flex items-center justify-between text-sm font-semibold mb-2 pl-0.5",children:[Object(ne.jsx)("span",{children:"Admins"}),Object(ne.jsx)(Ct,{onClick:function(){return h({open:!0,role:a.EDITOR,reload:!1})},type:"button",size:"regular",variant:"text-accent",children:Object(ne.jsx)("span",{className:"font-semibold",children:"Add +"})})]}),j.map((function(e,t){return e.role===a.ADMIN&&Object(ne.jsxs)("div",{className:"flex border-t border-bg items-center",children:[Object(ne.jsx)("div",{className:"w-8 h-8 rounded-full bg-bg overflow-hidden",children:Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-xs",children:Object(ne.jsxs)("span",{children:[e.firstName[0],e.lastName[0]]})})}),Object(ne.jsxs)("div",{className:"flex flex-1 items-center pl-3 pr-1 py-4 text-sm",children:[e.firstName," ",e.lastName]})]},t)}))]})}),Object(ne.jsxs)(zn,{allowedRoles:[a.ADMIN,a.PROJECT_MANAGER],organisationType:E.EDITING,children:[Object(ne.jsxs)("div",{className:"",style:{display:1===s?"block":"none"},children:[Object(ne.jsxs)("p",{className:"flex items-center justify-between text-sm font-semibold mb-2 pl-0.5",children:[Object(ne.jsx)("span",{children:"Project Managers"}),Object(ne.jsx)(Ct,{onClick:function(){return h({open:!0,role:a.PROJECT_MANAGER,reload:!1})},type:"button",size:"regular",variant:"text-accent",children:Object(ne.jsx)("span",{className:"font-semibold",children:"Add +"})})]}),Object(ne.jsx)(In,{open:f.open,setOpen:function(e,t){return h(Object(x.a)(Object(x.a)({},f),{},{open:e,reload:t}))},role:f.role}),g&&Object(ne.jsx)("div",{className:"text-center mt-4",children:Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5})}),j.map((function(e,t){return e.role===a.PROJECT_MANAGER&&Object(ne.jsxs)("div",{className:"flex border-t border-bg items-center",children:[Object(ne.jsx)("div",{className:"w-8 h-8 rounded-full bg-bg overflow-hidden",children:Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-xs",children:Object(ne.jsxs)("span",{children:[e.firstName[0],e.lastName[0]]})})}),Object(ne.jsxs)("div",{className:"flex flex-1 items-center pl-3 pr-1 py-4 text-sm",children:[e.firstName," ",e.lastName]})]},t)}))]}),Object(ne.jsxs)("div",{className:"",style:{display:2===s?"block":"none"},children:[Object(ne.jsxs)("p",{className:"flex items-center justify-between text-sm font-semibold mb-2 pl-0.5",children:[Object(ne.jsx)("span",{children:"Editors"}),Object(ne.jsx)(Ct,{onClick:function(){return h({open:!0,role:a.EDITOR,reload:!1})},type:"button",size:"regular",variant:"text-accent",children:Object(ne.jsx)("span",{className:"font-semibold",children:"Add +"})})]}),j.map((function(e,t){return e.role===a.EDITOR&&Object(ne.jsxs)("div",{className:"flex border-t border-bg items-center",children:[Object(ne.jsx)("div",{className:"w-8 h-8 rounded-full bg-bg overflow-hidden",children:Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-xs",children:Object(ne.jsxs)("span",{children:[e.firstName[0],e.lastName[0]]})})}),Object(ne.jsxs)("div",{className:"flex flex-1 items-center pl-3 pr-1 py-4 text-sm",children:[e.firstName," ",e.lastName]})]},t)}))]})]})]})]})},Dn=function(e){var t=Xe(),n=Object(o.b)(),a=Object(o.c)((function(e){return e.authReducer}))._e_,c=Object(r.useState)(""),s=Object(Q.a)(c,2),i=s[0],l=s[1],d=Object(r.useState)(!1),j=Object(Q.a)(d,2),b=j[0],u=j[1],m=Ne(Rn,{onSuccess:function(a,r){var c=a.data;u(!1),t({variant:oe.SUCCESS,visible:!0,message:"Organisation updated!"}),n(dn({user:Object(x.a)(Object(x.a)({},e.user),{},{organisation:Object(x.a)(Object(x.a)({},e.user.organisation),c.organisation)})}))}}).mutate,f=Object(r.useCallback)((function(t){if(a){var n=a,r=[];if(t){for(var c=function(){var a=t[s].name,c=a.lastIndexOf("."),i=a.substring(c+1),o="".concat(Object(on.a)(),".").concat(i),d=n.add({name:o,file:t[s],started:function(e){l(e),u(!0)},progress:function(t){1===t&&(m({organisation:e.user.organisation._id,data:{organisationName:e.user.organisation.name,picture:o}}),l(o))}});r.push(d)},s=0;s<t.length;s++)c();Promise.all(r).catch((function(e){return console.log(e)}))}}}),[]),h=Object(bn.a)({onDrop:f,accept:"image/*"}),O=h.getRootProps,p=h.getInputProps,g=Mt.b().shape({organisationName:Mt.c().required()});return Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsx)(Ut.d,{enableReinitialize:!0,initialValues:{organisationName:e.user.organisation.name},validationSchema:g,onSubmit:function(t){var n=i?{organisationName:t.organisationName,picture:i}:{organisationName:t.organisationName};m({organisation:e.user.organisation._id,data:n})},children:function(t){return Object(ne.jsxs)(Ut.c,{className:"max-w-sm mt-10 mx-auto",children:[Object(ne.jsxs)("div",{className:"w-32 mt-4 text-center",children:[Object(ne.jsx)("div",{className:"w-32 h-32 border-2 border-dashed border-bg rounded-xl overflow-hidden",children:b?Object(ne.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5})}):Object(ne.jsx)("div",{className:"w-full h-full",children:e.user.organisation.picture?Object(ne.jsx)("img",{src:e.user.organisation.picture,className:"h-full w-full object-contain"}):Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-base font-bold",children:Object(ne.jsx)("span",{children:e.user.organisation.name.slice(0,2)})})})}),Object(ne.jsx)(Ct,{type:"button",variant:"text-accent",size:"medium",fullWidth:!0,children:Object(ne.jsxs)("div",Object(x.a)(Object(x.a)({},O()),{},{children:[Object(ne.jsx)("input",Object(x.a)({},p())),Object(ne.jsx)("p",{className:"text-sm font-semibold",children:e.user.organisation.picture?"Change Image":"Upload Image"})]}))})]}),Object(ne.jsx)("div",{className:"mt-2",children:Object(ne.jsx)(Ut.a,{name:"organisationName",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Organisation Name",fullWidth:!0,error:a&&Boolean(r)}))}})}),Object(ne.jsx)("div",{className:"mt-8 w-32",children:Object(ne.jsx)(Ct,{type:"submit",size:"regular",variant:"fill-accent",fullWidth:!0,children:Object(ne.jsx)("span",{className:"font-semibold",children:"Save"})})})]})}})})},Mn=n(41),Fn=n(160),Bn=n.n(Fn),Wn=n(337),Gn=n.n(Wn),Vn=n(336),Ln=n.n(Vn),Un=n(1117),Jn=n(1128),Hn=n(1106),Xn={question:"",answerType:R.TEXT,required:!1,expectedAnswer:"YES",options:[],errorMessage:""},Yn=function(e){var t=Xe(),n=Object(r.useState)([]),a=Object(Q.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(),o=Object(Q.a)(i,2),l=o[0],d=o[1],j=Object(r.useState)({open:!1,data:Xn}),b=Object(Q.a)(j,2),u=b[0],m=b[1],f=ye(Cn,{onSuccess:function(e){var t=e.data;s(t.projectTemplates)}}),h=f.query,O=f.loading,p=Ne(Tn,{onSuccess:function(e){var n=e.data,a=c;a.push(n.projectTemplate),s(a),d(n.projectTemplate),t({visible:!0,variant:oe.SUCCESS,message:"Template created!"})},onError:function(e){t({visible:!0,variant:oe.ERROR,message:e.message})}}),g=p.mutate,v=p.loading,N=Ne(_n,{onSuccess:function(e){var n=e.data;d(n.projectTemplate),t({visible:!0,variant:oe.SUCCESS,message:"Template Updated!"})},onError:function(e){t({visible:!0,variant:oe.ERROR,message:e.message})}}),y=N.mutate,w=N.loading;Object(r.useEffect)((function(){h({organisation:e.user.organisation._id})}),[]);var S=function(){m(Object(x.a)(Object(x.a)({},u),{},{open:!1}))},k=Mt.b().shape({name:Mt.c().required(),questions:Mt.a().min(1)}),E=Mt.b().shape({question:Mt.c().required("Question is required"),errorMessage:Mt.c().when("required",{is:!0,then:Mt.c().required("Error message is required")}),options:Mt.a().when("answerType",{is:R.RADIO,then:Mt.a().of(Mt.c().required()).min(1)})});return Object(ne.jsxs)("div",{children:[O?Object(ne.jsx)("div",{className:"py-2 px-5",children:Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5})}):Object(ne.jsxs)("div",{className:"text-sm border-b border-bg mb-4 flex py-2 px-5 flex-wrap",children:[c.map((function(e,t){return Object(ne.jsx)("div",{onClick:function(){return d(e)},className:"h-10 px-3 m-1 flex items-center rounded-md border text-sm font-semibold cursor-pointer ".concat(e._id===(null===l||void 0===l?void 0:l._id)?"border-accent bg-bg":"border-grey-1"),children:e.name})})),Object(ne.jsx)("div",{onClick:function(){return d({name:"",questions:[]})},className:"h-10 px-3 m-1 flex items-center rounded-md border border-dashed border-grey-1 text-accent text-sm font-semibold cursor-pointer hover:bg-bg",children:"Create New +"})]}),l&&Object(ne.jsx)(Ut.d,{enableReinitialize:!0,initialValues:{name:l.name,questions:l.questions},validationSchema:k,onSubmit:function(t){l._id?y({organisation:e.user.organisation._id,template:l._id,data:{name:t.name,questions:t.questions}}):g({organisation:e.user.organisation._id,data:t})},children:function(e){return Object(ne.jsxs)(Ut.c,{className:"mt-6 px-6",children:[Object(ne.jsx)(Ut.a,{name:"name",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-sm px-1 font-bold flex justify-between mt-4",children:[Object(ne.jsx)("span",{children:"Template Name*"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Enter template name",fullWidth:!0,error:a&&Boolean(r)}))]})}}),Object(ne.jsxs)("p",{className:"mb-1.5 mt-4 px-1 text-sm font-bold flex justify-between",children:[Object(ne.jsx)("span",{children:"Questions"}),Object(ne.jsx)("span",{className:"text-error font-normal",children:e.touched.questions&&Boolean(e.errors.questions)?"Add at least one question":""})]}),Object(ne.jsxs)("div",{className:"p-4 border border-dashed ".concat(e.touched.questions&&Boolean(e.errors.questions)?"border-error":" border-grey-1"," rounded-xl"),children:[e.values.questions.length?e.values.questions.map((function(e,t){var n;return Object(ne.jsxs)("div",{className:"py-4 relative rounded-xl overflow-hidden group",children:[e.answerType===R.RADIO&&Object(ne.jsxs)("div",{className:"opacity-50",children:[Object(ne.jsxs)("p",{className:"text-sm font-bold mb-2",children:[e.question,e.required&&"*"]}),null===(n=e.options)||void 0===n?void 0:n.map((function(e,t){return Object(ne.jsxs)("div",{className:"flex items-center text-sm py-1",children:[Object(ne.jsx)(Yt.a,{fontSize:"small"}),Object(ne.jsx)("span",{className:"ml-2",children:e})]})}))]}),e.answerType===R.TEXT&&Object(ne.jsxs)("div",{className:"opacity-50",children:[Object(ne.jsxs)("p",{className:"text-sm font-bold mb-2",children:[e.question,e.required&&"*"]}),Object(ne.jsx)("div",{className:"bg-bg border border-bg rounded-lg w-full h-10"})]}),Object(ne.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-end opacity-0 group-hover:opacity-100",style:{background:"linear-gradient(90deg, rgba(19,19,24,0) 10%, rgb(19,19,24) 78%)"},children:Object(ne.jsx)("div",{className:"h-9 flex w-16 rounded-lg overflow-hidden bg-bg-dark text-sm font-semibold mr-4",children:Object(ne.jsxs)("div",{onClick:function(){return m({open:!0,data:e,questionIndex:t})},className:"flex flex-1 items-center justify-center bg-bg-light text-accent font-semibold cursor-pointer",children:[Object(ne.jsx)(Bn.a,{fontSize:"inherit"}),Object(ne.jsx)("span",{className:"ml-1",children:"Edit"})]})})})]})})):null,Object(ne.jsx)("div",{className:"mt-2 mb-2 flex justify-between",children:Object(ne.jsx)(Ct,{variant:"text-accent",size:"regular",type:"button",onClick:function(){return m({open:!0,data:Xn,questionIndex:void 0})},children:Object(ne.jsx)("span",{className:"font-semibold text-sm",children:"Add question +"})})})]}),Object(ne.jsx)("div",{className:"mt-6 mb-20 w-32",children:Object(ne.jsx)(Ct,{variant:"fill-accent",size:"regular",fullWidth:!0,type:"submit",children:w||v?Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5}):Object(ne.jsx)("strong",{children:"Save"})})}),Object(ne.jsx)(jn.a,{open:u.open,onClose:S,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:Object(ne.jsx)(Ut.d,{enableReinitialize:!0,initialValues:u.data,validationSchema:E,onSubmit:function(t,n){n.setSubmitting;var a=Object(Mn.a)(e.values.questions);"number"===typeof u.questionIndex?a[u.questionIndex]=t:a.push(t),e.setFieldValue("questions",a),S()},children:function(t){return Object(ne.jsx)(Ut.c,{className:"bg-bg-dark text-primary rounded-xl overflow-hidden",children:Object(ne.jsxs)("div",{className:"bg-bg-light",style:{width:520},children:[Object(ne.jsxs)("div",{className:"text-sm font-bold py-3 px-7 border-b border-bg-dark flex items-center justify-between",children:[Object(ne.jsxs)("span",{children:["number"===typeof u.questionIndex?"Edit":"Add"," question"]}),Object(ne.jsx)(_e.a,{onClick:S,edge:"end","aria-label":"options",size:"small",color:"secondary",children:Object(ne.jsx)(ze.a,{style:{fontSize:16}})})]}),Object(ne.jsxs)("div",{className:"p-6",children:[Object(ne.jsxs)("div",{className:"",children:[Object(ne.jsx)(Ut.a,{name:"question",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-xs px-1 font-semibold flex justify-between",children:[Object(ne.jsx)("span",{children:"Question*"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Enter question",fullWidth:!0,error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("div",{className:"mt-4"}),Object(ne.jsx)(Ut.a,{name:"answerType",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-xs px-1 font-semibold flex justify-between",children:[Object(ne.jsx)("span",{children:"Select answer type"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsxs)(Un.a,Object(x.a)(Object(x.a)({},t),{},{fullWidth:!0,input:Object(ne.jsx)(pt,{}),error:a&&Boolean(r),children:[Object(ne.jsx)(Jn.a,{value:R.TEXT,children:"Text"}),Object(ne.jsx)(Jn.a,{value:R.RADIO,children:"Radio options"})]}))]})}}),Object(ne.jsxs)("div",{className:"border border-grey-1 rounded-b-xl rounded-t-md py-4 px-3",style:{zIndex:-1},children:[Object(ne.jsx)(Hn.a,{in:t.values.answerType===R.RADIO,children:Object(ne.jsxs)("div",{className:"pb-4 mb-4 border-b border-bg",children:[Object(ne.jsx)("p",{className:"text-sm font-bold",children:"Options"}),Object(ne.jsx)(Ut.b,{name:"options",children:function(e){var n,a=e.push,r=e.remove,c=e.form;return Object(ne.jsxs)(ne.Fragment,{children:[null===(n=t.values.options)||void 0===n?void 0:n.map((function(e,t){return Object(ne.jsx)(Ut.a,{name:"options[".concat(t,"]"),children:function(e){var n=e.field,a=e.meta,c=a.touched,s=a.error;return Object(ne.jsxs)("div",{className:"flex items-center",children:[Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},n),{},{placeholder:"Option ".concat(t+1," ").concat(c&&Boolean(s)?"required*":""),fullWidth:!0,error:c&&Boolean(s)})),Object(ne.jsx)("span",{className:"px-1"}),Object(ne.jsx)(_e.a,{onClick:function(){return r(t)},color:"secondary",size:"small",children:Object(ne.jsx)(Ln.a,{fontSize:"inherit"})})]})}},t)})),"string"===typeof c.errors.options&&Object(ne.jsx)("p",{className:"text-sm text-error mt-2",children:"Add at least one option"}),Object(ne.jsx)("h4",{className:"text-sm text-accent font-semibold mt-2 cursor-pointer",onClick:function(){return a("")},children:"+ Add option"})]})}})]})}),Object(ne.jsxs)("div",{className:"flex items-center",children:[Object(ne.jsx)(Ut.a,{name:"required",children:function(e){var t=e.field,n=e.form;n.setTouched,n.touched,e.meta;return Object(ne.jsx)(gt,Object(x.a)({checked:t.value},t))}}),Object(ne.jsx)("h4",{className:"text-sm font-semibold ml-2",children:"Required"})]}),Object(ne.jsx)(Hn.a,{in:t.values.required,children:Object(ne.jsx)(Ut.a,{name:"errorMessage",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-xs px-1 font-semibold flex justify-between mt-4",children:[Object(ne.jsx)("span",{children:"Error message*"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Enter the error message",fullWidth:!0,error:a&&Boolean(r)}))]})}})})]})]}),Object(ne.jsxs)("div",{className:"mt-6 flex items-center",children:[Object(ne.jsx)("div",{className:"flex flex-1",children:"number"===typeof u.questionIndex?Object(ne.jsxs)(Ct,{variant:"text-error",size:"regular",type:"button",onClick:function(){var t=Object(Mn.a)(e.values.questions);"number"===typeof u.questionIndex&&t.splice(u.questionIndex,1),e.setFieldValue("questions",t),S()},children:[Object(ne.jsx)(Gn.a,{fontSize:"inherit"}),Object(ne.jsx)("span",{className:"font-semibold ml-1",children:"Delete"})]}):null}),Object(ne.jsx)(Ct,{variant:"text-white",size:"regular",type:"button",onClick:S,children:"Cancel"}),Object(ne.jsx)("span",{className:"px-1"}),Object(ne.jsx)(Ct,{variant:"fill-accent",size:"regular",type:"submit",children:Object(ne.jsx)("strong",{children:"Done"})})]})]})]})})}})})]})}})]})},Kn=[{type:"BASIC",name:"Basic",title:"Basic settings",icon:Object(ne.jsx)(vn.a,{fontSize:"small",color:"primary"}),alloweRoles:[a.ADMIN]},{type:"TEAM",name:"Team",title:"Manage your team",icon:Object(ne.jsx)(hn.a,{fontSize:"small",color:"primary"}),alloweRoles:[a.ADMIN,a.PROJECT_MANAGER]},{type:"PROJECT_FORM",name:"Project Templates",title:"Manage Project templates",icon:Object(ne.jsx)(pn.a,{fontSize:"small",color:"primary"}),alloweRoles:[a.ADMIN],organisationType:E.EDITING}],$n=function(e){var t=e.handleClose,n=(Object(te.h)(),Object(o.c)((function(e){return e.authReducer})).user),c=Object(r.useState)((null===n||void 0===n?void 0:n.role)===a.ADMIN?0:1),s=Object(Q.a)(c,2),i=s[0],l=s[1];return Object(ne.jsxs)("div",{className:"fixed inset-0 z-10 flex justify-center",children:[Object(ne.jsx)("div",{role:"button",onClick:function(){return t()},className:"fixed inset-0 -z-1 bg-bg-dark opacity-90"}),Object(ne.jsx)("div",{className:"my-10 mx-auto rounded-xl overflow-hidden z-15 bg-bg-dark",style:{width:1e3},children:Object(ne.jsxs)("div",{className:"p-6 bg-bg flex relative h-full w-full",children:[Object(ne.jsxs)("div",{className:"absolute inset-y-0 left-0 w-72 border-r border-bg-dark p-6",children:[Object(ne.jsxs)("div",{className:"flex items-center pb-5",children:[Object(ne.jsx)(_e.a,{onClick:function(){return t()},"aria-label":"delete",size:"small",color:"secondary",children:Object(ne.jsx)(xn.a,{style:{fontSize:22}})}),Object(ne.jsx)("span",{className:"ml-2 text-sm font-bold",children:"Organisation Setup"})]}),Object(ne.jsxs)("div",{className:"flex bg-bg rounded-md",children:[Object(ne.jsx)("div",{className:"flex items-center pl-2 py-2",children:Object(ne.jsx)("div",{className:"w-12 h-12 rounded-md bg-bg overflow-hidden",children:(null===n||void 0===n?void 0:n.organisation.picture)?Object(ne.jsx)("img",{src:n.organisation.picture,className:"h-full w-full object-contain"}):Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-base font-bold",children:Object(ne.jsx)("span",{children:null===n||void 0===n?void 0:n.organisation.name.slice(0,2)})})})}),Object(ne.jsx)("div",{className:"flex flex-1 items-center pl-3 pr-1 py-4",children:Object(ne.jsx)("span",{className:"text-sm font-semibold",children:null===n||void 0===n?void 0:n.organisation.name})})]}),Object(ne.jsx)("div",{className:"mt-8"}),Kn.map((function(e,t){return Object(ne.jsx)(zn,{allowedRoles:e.alloweRoles,organisationType:e.organisationType,children:Object(ne.jsxs)("div",{onClick:function(){t!==i&&l(t)},className:"group flex items-start ".concat(i===t&&"bg-bg","  -mx-3 px-4 rounded-md py-3 cursor-pointer hover:bg-bg-light"),children:[e.icon,Object(ne.jsx)("div",{className:"flex flex-1 text-sm font-semibold items-center ml-2",children:e.name})]},t)})}))]}),Object(ne.jsxs)("div",{className:"absolute inset-y-0 left-72 right-0",children:[Object(ne.jsx)("div",{className:"absolute inset-x-0 flex justify-between items-center border-b border-bg-dark h-16 px-6",children:Object(ne.jsx)("p",{className:"text-base font-bold",children:Kn[i].title})}),n&&Object(ne.jsxs)("div",{className:"absolute inset-0 top-16 overflow-y-auto",children:[0===i&&Object(ne.jsx)(Dn,{user:n}),1===i&&Object(ne.jsx)(qn,{}),2===i&&Object(ne.jsx)(Yn,{user:n})]})]})]})})]})},Qn=function(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.authReducer})).user,c=Object(r.useState)({anchorEl:null,name:null}),s=Object(Q.a)(c,2),i=s[0],l=s[1],d=Object(r.useState)(!1),j=Object(Q.a)(d,2),b=j[0],u=j[1],m=Object(o.c)((function(e){return e.authReducer}))._e_,f=Object(r.useState)(""),h=Object(Q.a)(f,2),O=h[0],p=h[1],g=Object(r.useState)(!1),v=Object(Q.a)(g,2),N=v[0],y=v[1],w=Object(r.useState)(!1),S=Object(Q.a)(w,2),k=S[0],E=S[1],R=Ne(un,{onSuccess:function(e,a){var r=e.data;y(!1),t(dn({user:Object(x.a)(Object(x.a)({},r.user),{},{organisation:null===n||void 0===n?void 0:n.organisation})})),p("")}}).mutate,C=Object(r.useCallback)((function(e){if(m){y(!0);var t=[];if(e){for(var a=function(){var a=e[r].name,c=a.lastIndexOf("."),s=a.substring(c+1),i="".concat(Object(on.a)(),".").concat(s),o=m.add({name:i,file:e[r],started:function(e){p(e)},complete:function(){R({user:null===n||void 0===n?void 0:n._id,data:{firstName:null===n||void 0===n?void 0:n.firstName,lastName:null===n||void 0===n?void 0:n.lastName,picture:i}}),p(i)}});t.push(o)},r=0;r<e.length;r++)a();Promise.all(t).catch((function(e){return console.log(e)}))}}}),[]),T=Object(bn.a)({onDrop:C,accept:"image/*"}),_=T.getRootProps,I=T.getInputProps,z=function(){l({anchorEl:null,name:i.name})},A=Boolean(i.anchorEl),P=Mt.b().shape({firstName:Mt.c().required(),lastName:Mt.c().required()});return n?Object(ne.jsxs)("div",{className:"flex justify-end items-center text-sm",children:[k&&Object(ne.jsx)($n,{handleClose:function(){return E(!1)}}),Object(ne.jsx)(bt.a,{id:"APP_HEADER_POPOVER",open:A,anchorEl:i.anchorEl,onClose:z,elevation:8,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(ne.jsx)("div",{className:"bg-bg-dark text-primary rounded-xl overflow-hidden",children:Object(ne.jsx)("div",{className:"bg-bg-light",children:Object(ne.jsxs)("div",{className:"bg-bg-light w-40",children:[Object(ne.jsxs)("div",{onClick:function(){z(),u(!0)},className:"py-3 px-4 border-b border-bg-dark text-sm cursor-pointer hover:bg-bg flex items-center",children:[Object(ne.jsx)(rn.a,{fontSize:"inherit"}),Object(ne.jsx)("span",{className:"ml-1",children:"Profile"})]}),Object(ne.jsxs)("div",{onClick:function(){return t(ln())},className:"py-3 px-4 text-sm cursor-pointer hover:bg-bg flex items-center",children:[Object(ne.jsx)(sn.a,{fontSize:"inherit"}),Object(ne.jsx)("span",{className:"ml-1",children:"Log out"})]})]})})})}),Object(ne.jsx)(jn.a,{open:b,onClose:function(){return u(!1)},scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:Object(ne.jsx)(Ut.d,{enableReinitialize:!0,initialValues:{firstName:n.firstName,lastName:n.lastName,picture:""},validationSchema:P,onSubmit:function(e){R({user:null===n||void 0===n?void 0:n._id,data:{firstName:e.firstName,lastName:e.lastName,picture:O}})},children:function(){return Object(ne.jsx)(Ut.c,{className:"bg-bg-dark text-primary rounded-lg overflow-hidden",children:Object(ne.jsxs)("div",{className:"bg-bg-light",style:{width:500},children:[Object(ne.jsxs)("div",{className:"text-base font-bold py-5 px-11 border-b border-bg-dark flex items-center justify-between",children:[Object(ne.jsx)("span",{children:"Update Profile"}),Object(ne.jsx)(_e.a,{onClick:function(){return u(!1)},edge:"end","aria-label":"options",size:"small",color:"secondary",children:Object(ne.jsx)(ze.a,{style:{fontSize:16}})})]}),Object(ne.jsxs)("div",{className:"p-10",children:[Object(ne.jsxs)("div",{className:"w-32 text-center",children:[Object(ne.jsx)("div",{className:"w-32 h-32 border-2 border-dashed border-bg rounded-xl",children:N?Object(ne.jsx)("div",{className:"h-32 border-2 border-dashed border-grey-1 rounded-xl m-4 cursor-pointer flex items-center justify-center flex-col",children:Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5})}):Object(ne.jsx)("div",{children:Object(ne.jsx)("img",{src:n.picture,className:"h-full w-full object-cover"})})}),Object(ne.jsx)(Ct,{type:"button",variant:"text-accent",size:"medium",fullWidth:!0,children:Object(ne.jsxs)("div",Object(x.a)(Object(x.a)({},_()),{},{children:[Object(ne.jsx)("input",Object(x.a)({},I())),Object(ne.jsx)("p",{className:"text-sm font-semibold",children:"Upload Image"})]}))})]}),Object(ne.jsxs)("div",{className:"flex mt-2",children:[Object(ne.jsx)(Ut.a,{name:"firstName",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"First Name",fullWidth:!0,error:a&&Boolean(r)}))}}),Object(ne.jsx)("span",{className:"px-1"}),Object(ne.jsx)(Ut.a,{name:"lastName",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Last Name",fullWidth:!0,error:a&&Boolean(r)}))}})]}),Object(ne.jsx)("div",{className:"mt-8 w-32",children:Object(ne.jsx)(Ct,{type:"submit",size:"regular",variant:"fill-accent",fullWidth:!0,children:Object(ne.jsx)("span",{className:"font-semibold",children:"Save"})})})]})]})})}})}),Object(ne.jsxs)("div",{onClick:[a.ADMIN,a.PROJECT_MANAGER].includes(n.role)?function(){return E(!0)}:void 0,className:"flex items-center rounded-lg pr-3 ".concat([a.ADMIN,a.PROJECT_MANAGER].includes(n.role)?"cursor-pointer hover:bg-bg":""," "),children:[Object(ne.jsx)("div",{className:"w-8 h-8 rounded-lg bg-bg overflow-hidden",children:n.organisation.picture?Object(ne.jsx)("img",{src:n.organisation.picture,className:"h-full w-full object-contain"}):Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-base font-bold",children:Object(ne.jsx)("span",{children:n.organisation.name.slice(0,2)})})}),Object(ne.jsx)("p",{className:"text-sm font-semibold ml-2",children:null===n||void 0===n?void 0:n.organisation.name})]}),Object(ne.jsx)("div",{className:"h-8 w-8 rounded-full flex justify-center items-center bg-grey-1 ml-8",children:Object(ne.jsx)(_e.a,{"aria-label":"delete",size:"small",color:"secondary",children:Object(ne.jsx)(nn.a,{fontSize:"inherit"})})}),Object(ne.jsx)("div",{onClick:function(e){return function(e,t){l({anchorEl:e.currentTarget,name:t})}(e,"ACCOUNT")},className:"h-8 w-8 rounded-full flex justify-center items-center bg-grey-1 ml-2 overflow-hidden cursor-pointer",children:Object(ne.jsx)("div",{className:"w-8 h-8",children:n.picture?Object(ne.jsx)("img",{src:n.picture,className:"h-full w-full object-cover"}):Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-xs font-bold",children:Object(ne.jsxs)("span",{children:[n.firstName[0],n.lastName[0]]})})})})]}):null},Zn=n(345),ea=n.n(Zn),ta=function(){var e=Object(te.i)().videoId,t=Object(r.useState)(),n=Object(Q.a)(t,2),a=n[0],c=n[1],s=Object(l.c)(),i=Object(Q.a)(s,1)[0],o=Object(r.useState)({organisation:i.get("org"),project:i.get("project"),task:i.get("task")}),d=Object(Q.a)(o,1)[0],j=Object(r.useState)([0,0]),b=Object(Q.a)(j,2),u=b[0],m=b[1],x=function(){var e=window.innerWidth/16-28,t=window.innerHeight/16-15.5,n=e,a=9*e/16;a>t&&(n=16*t/9,a=t),m([n,a])},f=Object(r.useState)(),h=Object(Q.a)(f,2),O=h[0],p=h[1],g=ye(ge,{onSuccess:function(t){var n=t.data.projectTask,a=n.videos.find((function(t){return t._id===e}));a&&p(a),c(n)}}).query;return Object(r.useEffect)((function(){return x(),window.addEventListener("resize",x),function(){return window.removeEventListener("resize",x)}}),[]),Object(r.useEffect)((function(){d.organisation&&d.project&&d.task&&g({organisation:d.organisation,project:d.project,task:d.task})}),[d]),d.organisation&&a&&e?Object(ne.jsx)(ne.Fragment,{children:O&&Object(ne.jsxs)("div",{className:"absolute inset-0 bg-bg-dark",children:[Object(ne.jsxs)("div",{className:"absolute inset-x-0 top-0 h-12 flex",children:[Object(ne.jsx)("div",{className:"flex flex-1 items-center pl-4"}),Object(ne.jsx)("div",{style:{width:"25rem"},className:"flex justify-end items-center pr-4 text-sm border-b border-l border-bg-dark bg-bg",children:Object(ne.jsx)(Qn,{})})]}),Object(ne.jsxs)("div",{className:"absolute top-12 inset-x-0 bottom-0 flex",children:[Object(ne.jsx)("div",{className:"flex flex-1 flex-col",children:Object(ne.jsx)(en,{dimentions:u,video:O,organisation:d.organisation,projectTask:a})}),Object(ne.jsx)("div",{style:{width:"25rem"},className:"bg-bg border-l border-bg-dark overflow-y-scroll",children:Object(ne.jsx)(Ke,{videoId:e})})]})]})}):Object(ne.jsx)("div",{className:"absolute inset-x-0 h-12 top-0 flex items-end mx-6",children:Object(ne.jsx)("div",{className:"flex flex-1 items-center",children:Object(ne.jsx)(ea.a,{color:"secondary",size:20,thickness:5})})})},na=n(112),aa=n.n(na);var ra=function(e){var t=Object(te.h)(),n=Object(o.b)(),a=Ne(En,{onSuccess:function(e){var a;n((a={organisation:Object(x.a)(Object(x.a)({},e.data.organisation),{},{projects:[]})},{type:P,payload:a})),s(),t("/org/".concat(e.data.organisation._id))}}),r=a.mutate,c=a.loading,s=function(){e.setOpen(!1)},i=Mt.b().shape({organisationName:Mt.c().required(),userEmail:Mt.c().email().required(),userFirstName:Mt.c().required(),userLastName:Mt.c().required()});return Object(ne.jsx)(jn.a,{open:e.open,onClose:s,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:Object(ne.jsx)(Ut.d,{enableReinitialize:!0,initialValues:{organisationName:"",userEmail:"",userFirstName:"",userLastName:""},validationSchema:i,onSubmit:function(e){r(e)},children:function(e){return Object(ne.jsx)(Ut.c,{className:"bg-bg-dark text-primary rounded-xl overflow-hidden",children:Object(ne.jsxs)("div",{className:"bg-bg-light w-96",children:[Object(ne.jsxs)("div",{className:"text-base font-bold py-3 px-7 border-b border-bg-dark flex items-center justify-between",children:[Object(ne.jsx)("span",{children:"Add Client"}),Object(ne.jsx)(_e.a,{onClick:s,edge:"end","aria-label":"options",size:"small",color:"secondary",children:Object(ne.jsx)(ze.a,{style:{fontSize:16}})})]}),Object(ne.jsxs)("div",{className:"p-6",children:[Object(ne.jsx)(Ut.a,{name:"organisationName",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-sm px-1 font-semibold flex justify-between",children:[Object(ne.jsx)("span",{children:"Company"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Enter Project name here",fullWidth:!0,error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("div",{className:"mt-6"}),Object(ne.jsx)(Ut.a,{name:"userEmail",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-sm font-semibold px-1 flex justify-between",children:[Object(ne.jsx)("span",{children:"Email"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Enter your email here",fullWidth:!0,error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("div",{className:"mt-6"}),Object(ne.jsxs)("p",{className:"text-sm font-semibold px-1 flex justify-between",children:[Object(ne.jsx)("span",{children:"Contact Person"}),(e.touched.userFirstName&&Boolean(e.errors.userFirstName)||e.touched.userLastName&&Boolean(e.errors.userLastName))&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsxs)("div",{className:"flex",children:[Object(ne.jsx)(Ut.a,{name:"userFirstName",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"First Name",fullWidth:!0,error:a&&Boolean(r)}))}}),Object(ne.jsx)("span",{className:"px-1"}),Object(ne.jsx)(Ut.a,{name:"userLastName",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Last Name",fullWidth:!0,error:a&&Boolean(r)}))}})]}),Object(ne.jsx)("div",{className:"pt-8",children:Object(ne.jsx)(Ct,{type:"submit",size:"large",variant:"fill-accent",fullWidth:!0,children:c?Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5}):Object(ne.jsx)("strong",{className:"text-sm",children:"Add \u2192"})})})]})]})})}})})},ca=function(){var e=Object(te.h)(),t=Object(o.c)((function(e){return e.organisationReducer})).organisations,n=Object(r.useState)(!1),c=Object(Q.a)(n,2),s=c[0],i=c[1],l=Object(o.b)(),d=["#003c66","#443b7d","#42133a","#840032","#b54b19","#e59500","#534f54","#02040f"],j=Object(te.i)().orgId,b=ye(kn,{onSuccess:function(t){var n,a=t.data.organisations||[];l((n={organisations:a.map((function(e,t){return Object(x.a)(Object(x.a)({},e),{},{projects:[]})}))},{type:A,payload:n})),a.length&&!j&&e("/org/".concat(a[0]._id))}}),u=b.query,m=b.loading;return Object(r.useEffect)((function(){u()}),[l]),Object(ne.jsxs)("div",{className:"absolute inset-y-0 left-0 w-16 bg-bg-dark border-r-2 border-bg-dark py-4 flex flex-col items-center",children:[Object(ne.jsx)(ra,{open:s,setOpen:i}),t.map((function(t,n){return Object(ne.jsxs)("div",{className:"w-full flex justify-center mb-3 relative",children:[Object(ne.jsx)("div",{className:"absolute inset-y-2 -left-1 w-1 rounded-r-full bg-white transform transition-transform ".concat(j===t._id&&"translate-x-1")}),Object(ne.jsx)("div",{className:"w-10 h-10 rounded-xl bg-bg-light overflow-hidden cursor-pointer transform transition-transform hover:scale-110",role:"button",onClick:j!==t._id?function(){e("/org/".concat(t._id))}:void 0,style:{backgroundColor:d[n%7]},children:t.picture?Object(ne.jsx)("img",{src:t.picture,className:"h-full w-full object-contain"}):Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-base font-bold",children:Object(ne.jsx)("span",{children:t.name.slice(0,2)})})},n)]},n)})),Object(ne.jsx)(zn,{allowedRoles:[a.ADMIN],children:Object(ne.jsx)("div",{className:"w-12 h-12 rounded-full bg-bg mb-4 overflow-hidden cursor-pointer flex justify-center items-center",children:Object(ne.jsx)(_e.a,{onClick:function(){return i(!0)},"aria-label":"delete",size:"small",color:"secondary",children:m?Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5}):Object(ne.jsx)(aa.a,{style:{fontSize:30,color:"var(--grey-2)"}})})})})]})},sa=n(1125),ia=n(1119),oa=n(1127),la=n(1108),da=n(1109),ja=(R.TEXT,R.RADIO,R.TEXT,R.TEXT,R.TEXT,function(e){var t=Object(te.h)(),n=(Object(o.b)(),Object(o.c)((function(e){return e.authReducer})).user),c=Object(r.useState)([]),s=Object(Q.a)(c,2),i=s[0],l=s[1],d=Object(r.useState)(),j=Object(Q.a)(d,2),b=j[0],u=j[1],m=Ne(he,{onSuccess:function(t){e.onAddProject(t.data.project),N()}}),f=m.mutate,h=m.loading,O=ye(Cn,{onSuccess:function(e){var t=e.data;l(t.projectTemplates)}}),p=O.query,g=O.loading;Object(r.useEffect)((function(){e.open&&n&&p({organisation:e.selectedOrganisation._id})}),[e.open]);var v=function(e){var t=[];return e.forEach((function(e,n){t.push({question:e.question,answerType:e.answerType,answer:""})})),t},N=function(){u(void 0),e.setOpen(!1)},y=Mt.b().shape({name:Mt.c().required(),template:Mt.c().required()});return Object(ne.jsx)(jn.a,{open:e.open,onClose:N,scroll:"body","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:Object(ne.jsx)("div",{className:"bg-bg-dark text-primary rounded-xl overflow-hidden",children:Object(ne.jsxs)("div",{className:"bg-bg-light",style:{width:560},children:[Object(ne.jsx)(oa.a,{className:"text-base font-bold border-b border-bg-dark",style:{padding:"0.75rem 1.75rem"},children:Object(ne.jsxs)("span",{className:"flex justify-between",children:[Object(ne.jsx)("span",{children:"New project"}),Object(ne.jsx)(_e.a,{onClick:N,edge:"end","aria-label":"options",size:"small",color:"secondary",children:Object(ne.jsx)(ze.a,{style:{fontSize:16}})})]})}),g?Object(ne.jsx)("div",{className:"pl-3 mt-2 h-20 flex items-center justify-center",children:Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5})}):Object(ne.jsx)(Ut.d,{initialValues:{name:"",template:null===b||void 0===b?void 0:b._id,questions:v((null===b||void 0===b?void 0:b.questions)||[])},validationSchema:y,onSubmit:function(t){f({organisation:e.selectedOrganisation._id,data:t})},children:function(n){return Object(ne.jsxs)(Ut.c,{children:[Object(ne.jsxs)(la.a,{style:{padding:"1.5rem",overflowY:"auto"},children:[Object(ne.jsxs)("div",{className:"flex",children:[Object(ne.jsx)(Ut.a,{name:"name",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)("div",{className:"flex flex-col flex-1",children:[Object(ne.jsxs)("p",{className:"text-sm px-1 font-semibold flex justify-between",children:[Object(ne.jsx)("span",{children:"Project Name*"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Enter Project name here",fullWidth:!0,error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("span",{className:"px-1"}),Object(ne.jsx)(Ut.a,{name:"template",children:function(r){var c=r.field,s=r.meta,o=s.touched,l=s.error;return Object(ne.jsxs)("div",{className:"flex flex-col flex-1",children:[Object(ne.jsxs)("p",{className:"text-sm px-1 font-semibold flex justify-between",children:[Object(ne.jsx)("span",{children:"Project Type*"}),o&&Boolean(l)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsxs)(Un.a,Object(x.a)(Object(x.a)({},c),{},{fullWidth:!0,value:null===b||void 0===b?void 0:b._id,input:Object(ne.jsx)(pt,{}),error:o&&Boolean(l),onChange:function(e){n.setFieldValue("template",e.target.value);var t=i.find((function(t){return t._id===e.target.value}));t&&(n.setFieldValue("questions",v(t.questions)),u(t))},children:[i.map((function(e){return Object(ne.jsx)(Jn.a,{value:e._id,children:e.name})})),Object(ne.jsx)(zn,{allowedRoles:[a.ADMIN,a.PROJECT_MANAGER],organisationType:E.EDITING,children:Object(ne.jsx)(Jn.a,{className:"border-t border-bg",children:Object(ne.jsx)("div",{onClick:function(){e.setOpen(!1),t("home/org-setup")},className:"-mx-2 -my-1 flex flex-1 border-t border-bg",children:Object(ne.jsx)(Ct,{type:"button",variant:"text-accent",size:"medium",fullWidth:!0,children:"New template +"})})})})]}))]})}})]}),Object(ne.jsx)("div",{className:"mt-4 mb-2 border-b border-bg"}),b&&b.questions.map((function(e,t){var n;switch(e.answerType){case R.RADIO:return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("p",{className:"text-sm px-1 font-bold flex justify-between mt-4 mb-1",children:Object(ne.jsx)("span",{children:"".concat(e.question," ").concat(e.required?"*":"")})}),null===(n=e.options)||void 0===n?void 0:n.map((function(e,n){return Object(ne.jsx)(sa.a,{style:{color:"inherit"},children:Object(ne.jsxs)("div",{className:"flex items-center cursor-pointer",children:[Object(ne.jsx)(Ut.a,{type:"radio",name:"questions[".concat(t,"].answer"),value:e,children:function(e){var t=e.field;return Object(ne.jsx)(ia.a,Object(x.a)(Object(x.a)({},t),{},{checked:t.checked,icon:Object(ne.jsx)(Yt.a,{fontSize:"small",style:{color:"var(--grey-2)"}}),checkedIcon:Object(ne.jsx)($t.a,{fontSize:"small"}),color:"primary"}))}}),Object(ne.jsx)("div",{className:"flex flex-1 items-center pl-1 text-sm",children:e})]})})}))]});case R.TEXT:return Object(ne.jsx)(Ut.a,{name:"questions[".concat(t,"].answer"),validate:function(t){return function(e,t,n){var a;return t&&("TRUE"!==n||e||(a="Error"),"FALSE"===n&&e&&(a="Error"),"TEXT"!==n||e||(a="Error"),"YES"===n&&"YES"!==e&&(a="Error"),"NO"===n&&"NO"!==e&&(a="Error")),a}(t,e.required,"TEXT")},children:function(t){var n=t.field,a=t.meta,r=a.touched,c=a.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-sm px-1 font-bold flex justify-between mt-4",children:[Object(ne.jsx)("span",{children:"".concat(e.question," ").concat(e.required?"*":"")}),r&&Boolean(c)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},n),{},{placeholder:"Type here",fullWidth:!0,error:r&&Boolean(c)}))]})}})}}))]}),Object(ne.jsx)(da.a,{style:{padding:"0.75rem 1.5rem 1.5rem 1.5rem"},children:Object(ne.jsx)("div",{className:"w-full",children:Object(ne.jsx)(Ct,{type:"submit",size:"large",variant:"fill-accent",fullWidth:!0,children:h?Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5}):Object(ne.jsx)("strong",{className:"text-sm",children:"Create \u2192"})})})})]})}})]})})})}),ba=function(){var e=Object(te.g)(),t=Object(te.h)(),n=Object(o.c)((function(e){return e.organisationReducer})).organisations,c=Object(r.useState)([]),s=Object(Q.a)(c,2),i=s[0],d=s[1],j=Object(r.useState)(!1),b=Object(Q.a)(j,2),u=b[0],m=b[1],f=Object(te.i)().orgId,h=n.find((function(e){return e._id===f})),O=ye(je,{onSuccess:function(n){var a=(n.data.projects||[]).map((function(e,t){return Object(x.a)(Object(x.a)({},e),{},{editors:[],tasks:[],manager:void 0})}));d(a),a.length&&!e.pathname.includes("project")&&t("/org/".concat(f,"/project/").concat(a[0]._id))}}),p=O.query,g=O.loading;return Object(r.useEffect)((function(){f&&(d([]),p(f))}),[f]),h?Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(ja,{selectedOrganisation:h,open:u,setOpen:m,onAddProject:function(e){var n=Object(x.a)(Object(x.a)({},e),{},{editors:[],tasks:[],manager:void 0});d((function(e){return[].concat(Object(Mn.a)(e),[n])})),t("/org/".concat(f,"/project/").concat(e._id))}}),Object(ne.jsxs)("div",{className:"flex bg-bg rounded-md",children:[Object(ne.jsx)("div",{className:"flex items-center pl-3",children:Object(ne.jsx)("div",{className:"w-8 h-8 rounded-full bg-bg overflow-hidden",children:h.picture?Object(ne.jsx)("img",{src:h.picture,className:"h-full w-full object-contain"}):Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-base font-bold",children:Object(ne.jsx)("span",{children:h.name.slice(0,2)})})})}),Object(ne.jsx)("div",{className:"flex flex-1 items-center pl-3 pr-1 py-4",children:Object(ne.jsx)("span",{className:"text-sm font-semibold",children:null===h||void 0===h?void 0:h.name})})]}),Object(ne.jsxs)("div",{className:"my-3 mt-5 pl-1 pb-2 flex items-center border-b border-bg",children:[Object(ne.jsx)("span",{className:"flex flex-1 text-sm font-bold",children:"Projects"}),Object(ne.jsx)(zn,{allowedRoles:[a.ADMIN],children:Object(ne.jsx)("div",{className:"rounded-full flex justify-center items-center bg-bg hover:bg-accent ml-2",children:Object(ne.jsx)(_e.a,{onClick:function(){return m(!0)},"aria-label":"delete",size:"small",color:"secondary",children:Object(ne.jsx)(aa.a,{fontSize:"inherit"})})})})]}),i.map((function(e,t){return Object(ne.jsx)(l.b,{to:"/org/".concat(f,"/project/").concat(e._id),className:function(e){return e.isActive?"group flex rounded-md pl-3 pr-1 py-2 mb-1 cursor-pointer hover:bg-bg-light bg-bg":"group flex rounded-md pl-3 pr-1 py-2 mb-1 cursor-pointer hover:bg-bg-light"},children:Object(ne.jsx)("div",{className:"flex flex-1 text-sm font-semibold items-center",children:e.name})},t)})),g&&Object(ne.jsx)("div",{className:"pl-3 mt-2",children:Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5})})]}):Object(ne.jsx)(ne.Fragment,{})},ua=n(51),ma=n.n(ua),xa=n(129),fa=n(346),ha=n.n(fa),Oa=n(212),pa=n.n(Oa),ga=$.store,va=function(){var e=Object(xa.a)(ma.a.mark((function e(){var t;return ma.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="ediflo-testing",e.next=3,ha.a.create({aws_key:"AKIA4B7ALXVK2BB4EMKM",bucket:t,awsRegion:"ap-south-1",signerUrl:"".concat("https://api.ediflo.co","/api/signer"),signHeaders:{Authorization:"Bearer ".concat(ga.getState().authReducer.token)},aws_url:"https://".concat(t,".s3.").concat("ap-south-1",".amazonaws.com"),cloudfront:!0,logging:!1,awsSignatureVersion:"4",computeContentMd5:!0,cryptoMd5Method:function(e){return pa.a.util.crypto.md5(e,"base64")},cryptoHexEncodedHash256:function(e){return pa.a.util.crypto.sha256(e,"hex")}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Na=function(){var e=Object(o.b)(),t=Object(te.i)().orgId;return Object(r.useEffect)((function(){va().then((function(t){return e({type:y,payload:{_e_:t}})}))}),[]),Object(ne.jsxs)("div",{className:"absolute inset-0 bg-bg-dark",children:[Object(ne.jsx)(ca,{}),Object(ne.jsx)("div",{className:"absolute inset-y-0 left-16 w-64 bg-bg py-4 px-3",style:{width:"17rem"},children:t&&Object(ne.jsx)(ba,{})}),Object(ne.jsxs)("div",{className:"absolute inset-y-0 right-0 flex flex-col bg-bg-light",style:{left:"21rem"},children:[Object(ne.jsxs)("div",{className:"absolute inset-x-0 h-12 top-0 flex items-end mx-6 z-10",children:[Object(ne.jsx)("div",{className:"flex flex-1 items-center"}),Object(ne.jsx)(Qn,{})]}),Object(ne.jsx)(te.b,{})]})]})},ya=n(213),wa=n.n(ya),Sa=n(354),ka=n.n(Sa),Ea=n(1121),Ra=function(e){var t,n=c.a.useState(a.PROJECT_MANAGER),s=Object(Q.a)(n,2),i=s[0],o=(s[1],Object(r.useState)([])),l=Object(Q.a)(o,2),d=l[0],j=l[1],b=ye(Sn,{onSuccess:function(e){j(e.data.users)}}),u=b.query,m=b.loading;Object(r.useEffect)((function(){e.open&&u()}),[e.open]);var f=Ne(ue,{onSuccess:function(e){N()}}),h=f.mutate,O=f.loading,p=Ne(me,{onSuccess:function(e){N()}}),g=p.mutate,v=p.loading,N=function(){e.setOpen(!1)},y=Mt.b().shape({manager:Mt.c().when(i,{is:a.PROJECT_MANAGER,then:Mt.c().required()}),editors:Mt.a().when(i,{is:a.EDITOR,then:Mt.a().of(Mt.c().required()).min(1)})});return Object(ne.jsx)(jn.a,{open:e.open,onClose:N,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:Object(ne.jsx)(Ut.d,{initialValues:{manager:(null===(t=e.project.manager)||void 0===t?void 0:t._id)||"",editors:[]},validationSchema:y,onSubmit:function(t){i===a.EDITOR?h({organisation:e.organisationId,project:e.project._id,data:{editors:t.editors}}):i===a.PROJECT_MANAGER&&g({organisation:e.organisationId,project:e.project._id,data:{manager:t.manager}})},children:function(e){return Object(ne.jsx)(Ut.c,{className:"bg-bg-dark text-primary rounded-xl overflow-hidden",children:Object(ne.jsxs)("div",{className:"bg-bg-light",style:{width:480},children:[Object(ne.jsxs)("div",{className:"text-sm font-bold py-3 px-7 border-b border-bg-dark flex items-center justify-between",children:[Object(ne.jsx)("span",{children:"Project Manager"}),Object(ne.jsx)(_e.a,{onClick:N,edge:"end","aria-label":"options",size:"small",color:"secondary",children:Object(ne.jsx)(ze.a,{style:{fontSize:16}})})]}),Object(ne.jsx)("div",{className:"px-6 pt-4 max-h-80 overflow-y-auto",children:d.map((function(e,t){return e.role===i&&Object(ne.jsx)(sa.a,{style:{color:"inherit"},children:Object(ne.jsxs)("div",{className:"flex border-b border-bg items-center cursor-pointer",children:[Object(ne.jsx)("div",{className:"w-8 h-8 rounded-full bg-bg overflow-hidden",children:Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-xs",children:Object(ne.jsxs)("span",{children:[e.firstName[0],e.lastName[0]]})})}),Object(ne.jsxs)("div",{className:"flex flex-1 items-center pl-3 pr-1 py-4 text-sm",children:[e.firstName," ",e.lastName]}),i===a.EDITOR?Object(ne.jsx)(Ut.a,{type:"checkbox",name:"editors",value:e._id,children:function(e){var t=e.field;return Object(ne.jsx)(Ea.a,Object(x.a)(Object(x.a)({},t),{},{checked:t.checked,color:"primary"}))}}):Object(ne.jsx)(Ut.a,{type:"radio",name:"manager",value:e._id,children:function(e){var t=e.field;return Object(ne.jsx)(ia.a,Object(x.a)(Object(x.a)({},t),{},{checked:t.checked,icon:Object(ne.jsx)(Yt.a,{style:{color:"var(--grey-2)"}}),color:"primary"}))}})]})})}))}),m&&Object(ne.jsx)("div",{className:"text-center mt-4",children:Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5})}),Object(ne.jsx)("div",{className:"p-6 text-right",children:Object(ne.jsx)(Ct,{type:"submit",size:"medium",variant:"fill-accent",children:O||v?Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5}):Object(ne.jsxs)("strong",{className:"text-sm",children:[i===a.EDITOR?"Editors":"Done"," \u2192"]})})})]})})}})})},Ca=n(353),Ta=n.n(Ca),_a=n(352),Ia=n.n(_a),za=n(1112),Aa=n(1113),Pa=n(1114),qa=n(1111),Da=n(1110),Ma=n(1130),Fa=Object(xt.a)((function(e){return Object(mt.a)({root:{color:"var(--text-primary)",border:0,padding:"10px 10px","&:first-child":{borderTopLeftRadius:5,borderBottomLeftRadius:5},"&:last-child":{borderTopRightRadius:5,borderBottomRightRadius:5}},head:{backgroundColor:"#121216",color:"var(--text-primary)",padding:"10px",fontSize:"var(--font-regular)"},body:{fontSize:14}})}))(Da.a),Ba=Object(xt.a)((function(e){return Object(mt.a)({root:{cursor:"pointer","&:nth-of-type(even)":{backgroundColor:"rgba(0,0,0,0.14)"},"&:hover":{backgroundColor:"var(--bg)"}}})}))(qa.a),Wa=(Object(xt.a)((function(){return Object(mt.a)({root:{height:24,width:24,fontSize:"1rem",lineHeight:2}})}))(Ma.a),Object(ut.a)({table:{minWidth:100},avatarCell:{width:"1%"},checkboxCell:{padding:"0 4px",width:"1%"},semiBold:{fontWeight:500},noWhiteSpace:{width:"1%"}})),Ga=n(1115),Va=n(347),La=function(e){var t=e.project,n=e.projectTask,a=Object(te.h)(),r=Wa(),c=Object(te.i)().orgId,s=Object(Mn.a)(t.editors);return t.manager&&s.push(t.manager),n.videos.length?Object(ne.jsx)(za.a,{style:{maxHeight:"100%"},className:"px-10",children:Object(ne.jsxs)(Aa.a,{stickyHeader:!0,className:r.table,"aria-label":"customized table",children:[Object(ne.jsx)(Pa.a,{children:Object(ne.jsxs)(qa.a,{children:[Object(ne.jsx)(Fa,{}),Object(ne.jsx)(Fa,{children:"Name"}),Object(ne.jsx)(Fa,{children:Object(ne.jsx)("div",{className:"text-center",children:"Version"})}),Object(ne.jsx)(Fa,{children:Object(ne.jsx)("div",{className:"text-center",children:"Comments"})}),Object(ne.jsx)(Fa,{children:"Uploaded at"}),Object(ne.jsx)(Fa,{children:"Uploaded by"})]})}),Object(ne.jsx)(Ga.a,{children:n.videos.map((function(e,i){var o=s.find((function(t){return t._id===e.user}));new Date(e.uploadedAt).toISOString().substring(0,10);return Object(ne.jsxs)(Ba,{onClick:function(){return a("/player/".concat(e._id,"?org=").concat(c,"&project=").concat(t._id,"&task=").concat(n._id))},children:[Object(ne.jsx)(Fa,{className:r.avatarCell,children:Object(ne.jsx)("div",{className:"h-8 w-10 bg-bg-dark rounded overflow-hidden flex items-center justify-center",style:{backgroundColor:"#282831"},children:Object(ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",viewBox:"0 0 21 21",className:"opacity-20",children:Object(ne.jsxs)("g",{id:"Group_15","data-name":"Group 15",transform:"translate(-967 -402)",children:[Object(ne.jsxs)("g",{id:"Ellipse_15","data-name":"Ellipse 15",transform:"translate(967 402)",fill:"none",stroke:"#fff",strokeWidth:"1",children:[Object(ne.jsx)("circle",{cx:"10.5",cy:"10.5",r:"10.5",stroke:"none"}),Object(ne.jsx)("circle",{cx:"10.5",cy:"10.5",r:"10",fill:"none"})]}),Object(ne.jsx)("path",{id:"Path_12","data-name":"Path 12",d:"M4.316.436a.974.974,0,0,1,1.624,0l4.153,6.272A.974.974,0,0,1,9.281,8.22H.976A.974.974,0,0,1,.164,6.708l2-3.016Z",transform:"translate(982.72 407.363) rotate(90)",fill:"#fff"})]})})})}),Object(ne.jsx)(Fa,{scope:"investor",children:e.name}),Object(ne.jsx)(Fa,{children:Object(ne.jsx)("div",{className:"text-center",children:Object(ne.jsxs)("div",{className:"h-6 px-2 bg-bg rounded-md inline-flex items-center mx-auto",children:["v",e.version]})})}),Object(ne.jsx)(Fa,{children:Object(ne.jsx)("div",{className:"text-center",children:Object(ne.jsx)("div",{className:"h-6 px-2 bg-bg rounded-md inline-flex items-center",children:e.comments.length})})}),Object(ne.jsx)(Fa,{children:Va.DateTime.fromISO(e.uploadedAt).toFormat("dd MMM yyyy, hh:mm a")}),Object(ne.jsx)(Fa,{children:o&&"".concat(o.firstName," ").concat(o.lastName)})]},i)}))})]})}):Object(ne.jsxs)("div",{className:"w-96 h-40 m-auto mt-8 rounded-xl text-sm text-center flex flex-col justify-center",children:[Object(ne.jsx)("span",{children:Object(ne.jsx)("svg",{className:"m-auto opacity-50",xmlns:"http://www.w3.org/2000/svg",width:"57.526",height:"37.438",viewBox:"0 0 57.526 37.438",children:Object(ne.jsxs)("g",{id:"Group_13","data-name":"Group 13",transform:"translate(-176.149 -107.224)",children:[Object(ne.jsx)("g",{id:"Group_10","data-name":"Group 10",transform:"translate(188.947 112.266)",children:Object(ne.jsx)("path",{id:"Path_16","data-name":"Path 16",d:"M268.466,143.077l-5.238,26.931-.686,3.526,34.969-.173c1.569-.008,2.96-1.4,3.465-3.472l6.2-25.425c.383-1.572-.458-3.206-1.649-3.205l-35.393.037C269.354,141.3,268.67,142.026,268.466,143.077Z",transform:"translate(-262.542 -141.259)",fill:"#403d4d"})}),Object(ne.jsx)("g",{id:"Group_11","data-name":"Group 11",transform:"translate(176.149 107.224)",children:Object(ne.jsx)("path",{id:"Path_17","data-name":"Path 17",d:"M220.561,139.19l-3.7-29.835a2.348,2.348,0,0,0-2.275-2.131l-8.119.027a2.212,2.212,0,0,0-1.6.711l-3.855,4.1-22.579.118a2.4,2.4,0,0,0-2.257,2.78l3.437,27.576a2.348,2.348,0,0,0,2.272,2.129l39.351-.078c4.383.091,4.8-1.2,4.8-1.2C221.009,144.494,220.562,139.193,220.561,139.19Z",transform:"translate(-176.149 -107.224)",fill:"#6a667c"})})]})})}),Object(ne.jsxs)("p",{className:"mt-4 text-grey-2",children:["Looks empty in here.",Object(ne.jsx)("br",{})," Upload files by clicking the upload button"]})]})},Ua=n(1116),Ja=function(e){Object(o.b)();var t=Object(r.useState)([]),n=Object(Q.a)(t,2),a=n[0],c=n[1],s=Ne(Oe,{onSuccess:function(t){var n=t.data.projectTask;n&&(n.editor=a.find((function(e){return e._id===n.editor}))),e.onAddTask(n),u()}}),i=s.mutate,l=s.loading,d=ye(Sn,{onSuccess:function(e){c(e.data.users)}}),j=d.query,b=d.loading;Object(r.useEffect)((function(){e.open&&j()}),[e.open]);var u=function(){e.setOpen(!1)},m=Mt.b().shape({name:Mt.c().required(),description:Mt.c().required(),editor:Mt.c().required()}),f=Object(Ua.a)({id:"use-autocomplete-demo",options:a,getOptionLabel:function(e){return"".concat(e.firstName," ").concat(e.lastName)}}),h=f.getInputProps,O=f.getListboxProps,p=f.getOptionProps,g=f.groupedOptions;f.value;return Object(ne.jsx)(jn.a,{open:e.open,onClose:u,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:Object(ne.jsx)(Ut.d,{enableReinitialize:!0,initialValues:{name:"",description:"",editor:""},validationSchema:m,onSubmit:function(t){i({organisation:e.organisationId,project:e.project._id,data:t})},children:function(e){return Object(ne.jsx)(Ut.c,{className:"bg-bg-dark text-primary rounded-xl overflow-hidden",children:Object(ne.jsxs)("div",{className:"bg-bg-light",style:{width:600},children:[Object(ne.jsxs)("div",{className:"text-base font-bold py-3 px-7 border-b border-bg-dark flex items-center justify-between",children:[Object(ne.jsx)("span",{children:"Add task"}),Object(ne.jsx)(_e.a,{onClick:u,edge:"end","aria-label":"options",size:"small",color:"secondary",children:Object(ne.jsx)(ze.a,{style:{fontSize:16}})})]}),!a.length&&b?Object(ne.jsx)("div",{className:"pl-3 mt-2 h-20 flex items-center justify-center",children:Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5})}):Object(ne.jsxs)("div",{className:"p-6",children:[Object(ne.jsxs)("div",{className:"flex",children:[Object(ne.jsx)("div",{className:"flex flex-col flex-1",children:Object(ne.jsx)(Ut.a,{name:"name",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-xs px-1 font-semibold flex justify-between",children:[Object(ne.jsx)("span",{children:"Task Name"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Enter Task name here",fullWidth:!0,error:a&&Boolean(r)}))]})}})}),Object(ne.jsx)("span",{className:"px-1"}),Object(ne.jsxs)("div",{className:"flex flex-col flex-1 relative",children:[Object(ne.jsxs)("p",{className:"text-xs px-1 font-semibold flex justify-between",children:[Object(ne.jsx)("span",{children:"Assign to"}),e.touched.editor&&Boolean(e.errors.editor)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},h()),{},{placeholder:"Enter Task name here",fullWidth:!0,error:e.touched.editor&&Boolean(e.errors.editor)})),g.length>0?Object(ne.jsx)("div",{className:"absolute inset-x-0 top-16 h-56 bg-bg-dark z-10 rounded-xl overflow-hidden",children:Object(ne.jsx)("div",Object(x.a)(Object(x.a)({className:"h-full w-full bg-bg px-4 overflow-y-auto"},O()),{},{children:g.map((function(t,n){return Object(ne.jsx)("div",Object(x.a)(Object(x.a)({},p({option:t,index:n})),{},{children:Object(ne.jsxs)("div",{onClick:function(){return e.setFieldValue("editor",t._id)},className:"flex border-b border-bg items-center cursor-pointer",children:[Object(ne.jsx)("div",{className:"w-8 h-8 rounded-full bg-bg overflow-hidden",children:Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-xs",children:Object(ne.jsxs)("span",{children:[t.firstName[0],t.lastName[0]]})})}),Object(ne.jsxs)("div",{className:"flex flex-1 items-center pl-3 pr-1 py-4 text-sm",children:[t.firstName," ",t.lastName]})]})}))}))}))}):null]})]}),Object(ne.jsx)("div",{className:"mt-6"}),Object(ne.jsx)(Ut.a,{name:"description",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-xs px-1 font-semibold flex justify-between",children:[Object(ne.jsx)("span",{children:"Description"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{multiline:!0,rowsMax:6,rows:6,placeholder:"Task Description",fullWidth:!0,error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("div",{className:"pt-6",children:Object(ne.jsx)(Ct,{type:"submit",size:"large",variant:"fill-accent",fullWidth:!0,children:l?Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5}):Object(ne.jsx)("strong",{className:"text-sm",children:"Add Task \u2192"})})})]})]})})}})})},Ha=n(359),Xa=n(65),Ya=n.n(Xa),Ka=n(348),$a=n.n(Ka),Qa=n(351),Za=function(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.authReducer})),a=n._e_,c=(n.token,Object(r.useState)("")),s=Object(Q.a)(c,2),i=s[0],l=s[1],d=Object(r.useState)(0),j=Object(Q.a)(d,2),b=j[0],u=j[1],m=Object(r.useState)(!1),x=Object(Q.a)(m,2),f=x[0],h=x[1],O=Object(te.i)(),p=O.orgId,g=O.projectId,v=Ne(ve).mutate,N=Ne(pe,{onSuccess:function(n){var a=n.data;u(0),l(""),h(!1),p&&(v({organisation:p,task:e.taskId,project:g,data:{status:C.REVIEW}}),e.onClose(a.video),t({type:G,payload:a}))},onError:function(){u(0),l(""),h(!1)}}).mutate,y=function(){i?null===a||void 0===a||a.cancel(i).then((function(){e.onClose()})).catch((function(e){return console.log(e)})):e.onClose(),u(0),l(""),h(!1)},w=(Object(r.useCallback)((function(t){if(h(!0),console.log(a,p),a&&p&&g){var n=a,r=[];if(t){for(var c=function(){var a=t[s].name,c=a.lastIndexOf("."),i=a.substring(c+1),o="".concat(Object(on.a)(),".").concat(i),d=n.add({name:o,file:t[s],started:function(e){l(e)},progress:function(e){u(Math.round(100*e))},complete:function(){N({organisation:p,task:e.taskId,project:g,data:{file:o,name:a}})}});r.push(d)},s=0;s<t.length;s++)c();Promise.all(r).catch((function(e){return console.log(e)}))}}}),[]),Object(r.useMemo)((function(){var t;return new Ya.a({meta:{type:"avatar"},restrictions:{maxNumberOfFiles:1,allowedFileTypes:["video/*"]},autoProceed:!0}).use($a.a,{endpoint:"".concat("https://api.ediflo.co","/api/cloudflare/signer"),removeFingerprintOnSuccess:!0,headers:{"Upload-Metadata":"requiresignedurls"},onAfterResponse:function(e,n){return new Promise((function(e){return t=n.getHeader("stream-media-id"),e()}))}}).on("complete",(function(n){if(n.successful.length){var a=n.successful[0];N({organisation:p,task:e.taskId,project:g,data:{file:t,name:a.name}})}}))}),[]));return Object(r.useEffect)((function(){return function(){return w.close()}}),[w]),Object(ne.jsx)(jn.a,{open:e.open,onClose:function(e,t){t||y()},scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:Object(ne.jsx)("div",{className:"text-primary rounded-xl overflow-hidden",children:Object(ne.jsx)(Ha.a,{className:"bg-bg-dark text-primary rounded-xl overflow-hidden",children:Object(ne.jsxs)("div",{style:{width:480},children:[Object(ne.jsxs)("div",{className:"text-sm font-bold py-3 px-7 border-b border-bg-dark flex items-center justify-between text-white",children:[Object(ne.jsx)("span",{children:"Upload video"}),Object(ne.jsx)(_e.a,{onClick:y,edge:"end","aria-label":"options",size:"small",color:"secondary",children:Object(ne.jsx)(ze.a,{style:{fontSize:16}})})]}),Object(ne.jsx)("div",{className:"flex flex-col",children:f?Object(ne.jsxs)("div",{className:"h-32 border-2 border-dashed border-grey-1 rounded-xl m-4 cursor-pointer flex items-center justify-center flex-col",children:[Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5}),Object(ne.jsx)("p",{className:"text-xs mt-3",children:"Uploading..."}),Object(ne.jsx)("div",{className:" w-96 bg-bg h-3 rounded-full mt-6 relative overflow-hidden",children:Object(ne.jsx)("div",{className:"bg-accent absolute inset-y-0 left-0",style:{width:"".concat(b,"%")}})})]}):Object(ne.jsx)(Qa.a,{uppy:w,height:200})})]})})})})},er=function(e){var t=e.project,n=e.organisationId,c=["#00aab1","#00c000","#ffff32","#FF6800","#E55151"],s=Object(r.useState)(!1),i=Object(Q.a)(s,2),o=i[0],l=i[1],d=Object(r.useState)(t.tasks),j=Object(Q.a)(d,2),b=j[0],u=j[1],m=Object(r.useState)(),f=Object(Q.a)(m,2),h=f[0],O=f[1],p=Object(r.useState)(!1),g=Object(Q.a)(p,2),v=g[0],N=g[1],y=ye(ge,{onSuccess:function(e){O(e.data.projectTask)},onError:function(){O(void 0)}}),w=y.query,S=y.loading,k=function(e){O(t.tasks.find((function(t){return t._id===e}))),w({organisation:n,project:t._id,task:e})};return Object(r.useEffect)((function(){t.tasks.length&&k(t.tasks[0]._id)}),[]),Object(ne.jsxs)("div",{className:"absolute inset-0",children:[Object(ne.jsx)(Ja,{onAddTask:function(e){u((function(t){return[].concat(Object(Mn.a)(t),[e])}))},open:o,setOpen:function(e){return l(e)},organisationId:n,project:t}),h&&Object(ne.jsx)(Za,{open:v,onClose:function(e){N(!1),e&&h&&O(Object(x.a)(Object(x.a)({},h),{},{videos:[].concat(Object(Mn.a)(null===h||void 0===h?void 0:h.videos),[e])}))},taskId:h._id}),Object(ne.jsx)("div",{className:"absolute inset-x-0 overflow-y-auto border-b border-bg pb-2",children:Object(ne.jsx)("div",{className:"h-full flex items-start px-5",children:Object(ne.jsxs)("div",{className:"flex pr-6",children:[b.map((function(e,t){var n,r,s;return Object(ne.jsxs)("div",{onClick:function(){return k(e._id)},className:"pt-3 px-4 pb-4 text-sm rounded-md bg-bg w-60 h-28 m-1 cursor-pointer flex flex-col border hover:bg-bg-light ".concat(e._id===(null===h||void 0===h?void 0:h._id)?"border-accent":" border-transparent"),children:[Object(ne.jsx)("div",{className:"flex flex-1",children:Object(ne.jsx)("p",{className:"font-semibold overflow-hidden overflow-ellipsis whitespace-nowrap",children:e.name})}),Object(ne.jsxs)("div",{className:"flex items-center",children:[e.videos.length?Object(ne.jsxs)("p",{className:"h-6 mr-2 rounded-md inline-flex items-center text-xs",children:["v",e.videos.length]}):null,Object(ne.jsxs)("div",{className:"h-6 rounded-md inline-flex items-center text-xs",children:[Object(ne.jsx)(Ia.a,{fontSize:"inherit"}),Object(ne.jsx)("span",{className:"ml-0.5",children:e.videos.length})]})]}),Object(ne.jsxs)("div",{className:"flex items-center justify-between",children:[Object(ne.jsx)("div",{className:"flex items-center -ml-0.5",children:Object(ne.jsx)("p",{className:" rounded-md inline-flex items-center text-xs",children:Object(ne.jsxs)("span",{className:"flex items-center text-sm",style:{color:(null===(n=Qt.find((function(t){return t.name===e.status})))||void 0===n?void 0:n.color)||"initial"},children:[(null===(r=Qt.find((function(t){return t.name===e.status})))||void 0===r?void 0:r.icon)||null,Object(ne.jsx)("span",{className:"ml-1 text-primary",children:(null===(s=Qt.find((function(t){return t.name===e.status})))||void 0===s?void 0:s.label)||""})]})})}),Object(ne.jsx)(zn,{allowedRoles:[a.ADMIN,a.PROJECT_MANAGER,a.EDITOR],organisationType:E.EDITING,children:Object(ne.jsx)("div",{className:"w-7 h-7 rounded-full bg-bg overflow-hidden",style:{backgroundColor:c[t]},children:Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-sm font-semibold",children:Object(ne.jsxs)("span",{children:[e.editor.firstName[0],e.editor.lastName[0]]})})})})]})]},t)})),Object(ne.jsx)(zn,{allowedRoles:[a.ADMIN,a.PROJECT_MANAGER],organisationType:E.EDITING,children:Object(ne.jsxs)("div",{onClick:function(){return l(!0)},className:"text-sm rounded-md w-28 h-28 m-1 cursor-pointer flex items-center justify-center flex-col border border-dashed border-bg-light hover:bg-bg",children:[Object(ne.jsx)(aa.a,{fontSize:"small"}),Object(ne.jsx)("p",{className:"text-xs font-bold",children:"Add Task"})]})})]})})}),Object(ne.jsx)("div",{className:"absolute inset-x-0 bottom-0 top-32 flex flex-col",children:h&&Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("div",{className:"py-6 px-10 flex items-start",children:[Object(ne.jsxs)("div",{className:"flex flex-1 flex-col pr-6",children:[Object(ne.jsx)("div",{className:"text-sm font-bold",children:h.name}),Object(ne.jsx)("div",{className:"text-sm text-grey-5",children:h.description.length>100?"".concat(h.description.slice(0,100),"..."):h.description})]}),Object(ne.jsx)("span",{className:"px-1"}),Object(ne.jsx)(zn,{allowedRoles:[a.ADMIN,a.PROJECT_MANAGER,a.EDITOR],organisationType:E.EDITING,children:Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)(Ct,{onClick:function(){return N(!0)},type:"button",size:"regular",variant:"fill-accent",children:[Object(ne.jsx)("span",{className:"mr-1 font-semibold",children:"Upload"}),Object(ne.jsx)(Ta.a,{fontSize:"inherit"})]}),Object(ne.jsx)("span",{className:"px-1"}),Object(ne.jsx)(Ct,{type:"button",size:"medium",variant:"fill-accent",children:Object(ne.jsx)(Bn.a,{style:{fontSize:16}})})]})})]}),S?Object(ne.jsx)("div",{className:"mt-16 mx-6 flex justify-center",children:Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5})}):Object(ne.jsx)("div",{className:"flex flex-1 overflow-hidden",children:Object(ne.jsx)(La,{project:t,projectTask:h})})]})})]})},tr=function(e){var t=e.project,n=e.open,a=e.setOpen,r=function(){a(!1)};return Object(ne.jsx)(jn.a,{open:n,onClose:r,scroll:"body","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:Object(ne.jsx)("div",{className:"bg-bg-dark text-primary rounded-xl overflow-hidden",children:Object(ne.jsxs)("div",{className:"bg-bg-light",style:{width:600,minHeight:600},children:[Object(ne.jsx)(oa.a,{className:"text-base font-bold border-b border-bg-dark",style:{padding:"0.75rem 2rem"},children:Object(ne.jsxs)("span",{className:"flex justify-between",children:[Object(ne.jsx)("span",{className:"text-sm",children:"Project Info"}),Object(ne.jsx)(_e.a,{onClick:r,edge:"end","aria-label":"options",size:"small",color:"secondary",children:Object(ne.jsx)(ze.a,{style:{fontSize:16}})})]})}),Object(ne.jsxs)(la.a,{style:{padding:"1rem 2rem 2rem 2rem",overflowY:"auto"},children:[Object(ne.jsx)("p",{className:"text-md font-bold mb-3 pb-4 border-b border-grey-1",children:t.name}),t.questions.map((function(e,t){return Object(ne.jsxs)("div",{className:"flex items-center rounded-md text-sm py-3 px-6 -mx-2 mb-0.5",style:{backgroundColor:t%2===0?"rgba(0,0,0,0.1)":"transparent"},children:[Object(ne.jsx)("p",{className:"flex flex-1",children:e.question}),Object(ne.jsx)("span",{className:"px-4",children:":"}),Object(ne.jsxs)("p",{className:"flex flex-1",children:[" ",e.answer]})]},t)}))]})]})})})},nr=function(){var e=["#00aab1","#00c000","#ffff32","#FF6800","#E55151"],t=Object(r.useState)(!1),n=Object(Q.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(!1),o=Object(Q.a)(i,2),l=o[0],d=o[1],j=Object(r.useState)(),b=Object(Q.a)(j,2),u=b[0],m=b[1],f=Object(te.i)(),h=f.orgId,O=f.projectId,p=ye(be,{onSuccess:function(e){var t=e.data.project,n=t.tasks.map((function(e,n){return Object(x.a)(Object(x.a)({},e),{},{editor:t.editors.find((function(t,n){return t._id===e.editor}))})}));m(Object(x.a)(Object(x.a)({},t),{},{tasks:n}))}}),g=p.query,v=p.loading;return Object(r.useEffect)((function(){g({organisation:h,project:O})}),[O]),h&&u&&!v?Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("div",{className:"absolute inset-x-0 h-12 top-0 flex items-end mx-6",children:Object(ne.jsx)("div",{className:"flex flex-1 items-center",children:Object(ne.jsx)("p",{className:"text-lg font-bold mr-2",children:u.name||""})})}),Object(ne.jsx)(Ra,{open:c,setOpen:function(e){return s(e)},organisationId:h,project:u}),Object(ne.jsx)(tr,{open:l,setOpen:function(e){return d(e)},organisationId:h,project:u}),Object(ne.jsxs)("div",{className:"absolute inset-x-0 top-12 h-16 mx-6 flex items-center ",children:[Object(ne.jsx)(zn,{allowedRoles:[a.ADMIN,a.PROJECT_MANAGER,a.EDITOR],organisationType:E.EDITING,children:Object(ne.jsxs)(ne.Fragment,{children:[u.editors.map((function(t,n){return n<5&&Object(ne.jsx)("div",{className:"w-7 h-7 rounded-full bg-bg-dark overflow-hidden cursor-pointer ",style:{boxShadow:"0 0 0 2px ".concat(e[n])},children:Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-xs font-semibold",children:Object(ne.jsxs)("span",{children:[t.firstName[0],t.lastName[0]]})})},n)})),u.editors.length>4&&Object(ne.jsx)("div",{className:"w-7 h-7 rounded-full bg-bg-dark text-sm flex items-center justify-center cursor-pointer mr-2",style:{boxShadow:"0 0 0 2px ".concat(e[4])},children:"+".concat(u.editors.length-4)}),u.editors.length?Object(ne.jsx)("span",{className:"px-1"}):null]})}),Object(ne.jsxs)("div",{className:"h-8 flex flex-1 items-center",children:[Object(ne.jsx)(zn,{allowedRoles:[a.ADMIN],organisationType:E.EDITING,children:Object(ne.jsxs)(ne.Fragment,{children:[u.manager?Object(ne.jsxs)("div",{onClick:function(){return s(!0)},className:"pr-3 p-0.5 bg-bg rounded-full flex items-center cursor-pointer ",style:{boxShadow:"0 0 0 1px ".concat(e[4])},children:[Object(ne.jsx)("div",{className:"w-7 h-7 bg-bg-dark rounded-full overflow-hidden",children:Object(ne.jsx)("div",{className:"h-full w-full flex items-center justify-center text-xs font-semibold",children:Object(ne.jsxs)("span",{children:[u.manager.firstName[0],u.manager.lastName[0]]})})}),Object(ne.jsx)("span",{className:"ml-2 text-xs",children:"Manager"})]}):Object(ne.jsxs)(Ct,{onClick:function(){return s(!0)},type:"button",size:"regular",variant:"fill-accent",children:[Object(ne.jsx)(wa.a,{fontSize:"inherit"}),Object(ne.jsx)("span",{className:"ml-1 font-semibold",children:"Add Manager"})]}),Object(ne.jsx)("span",{className:"px-1"})]})}),Object(ne.jsx)(zn,{allowedRoles:[a.ADMIN],organisationType:E.PRODUCING,children:Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)(Ct,{onClick:function(){return s(!0)},type:"button",size:"regular",variant:"fill-accent",children:[Object(ne.jsx)(wa.a,{fontSize:"inherit"}),Object(ne.jsx)("span",{className:"ml-1 font-semibold",children:"Add Viewers"})]}),Object(ne.jsx)("span",{className:"px-1"})]})}),Object(ne.jsx)(Ct,{onClick:function(){return d(!0)},variant:"text-accent",size:"regular",children:Object(ne.jsxs)("span",{className:"flex items-center",children:[Object(ne.jsx)(ka.a,{fontSize:"small"}),Object(ne.jsx)("span",{className:"font-semibold ml-0.5",children:"Project info"})]})})]})]}),Object(ne.jsx)("div",{className:"absolute top-28 bottom-0 inset-x-0",children:Object(ne.jsx)(er,{project:u,organisationId:h})})]}):Object(ne.jsx)("div",{className:"absolute inset-x-0 h-12 top-0 flex items-end mx-6",children:Object(ne.jsx)("div",{className:"flex flex-1 items-center",children:Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5})})})},ar=function(e){return de.a.post("/api/auth/signup",e)},rr=function(e){return de.a.post("/api/auth/otp",e)},cr=function(e){return de.a.post("/api/auth/password",e)},sr=function(e){return de.a.post("/api/auth/signin",e)},ir=$.store,or=function(e){e?de.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete de.a.defaults.headers.common.Authorization};de.a.defaults.baseURL="https://api.ediflo.co",de.a.defaults.headers.post["Content-Type"]="application/json",de.a.interceptors.response.use(function(){var e=Object(xa.a)(ma.a.mark((function e(t){return ma.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(xa.a)(ma.a.mark((function e(t){return ma.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.response&&401===t.response.status&&ir.dispatch(ln()),e.abrupt("return",Promise.reject(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());de.a;var lr=function(){var e=Object(o.b)(),t=Object(te.h)(),n=Object(o.c)((function(e){return e.authReducer})),a=n.authenticated,r=n.password,c=Ne(sr,{onSuccess:function(t){var n,c=t.data;or(c.token),e((n={authenticated:a,password:r,user:c.user,token:c.token},{type:g,payload:n}))}}),s=c.mutate,i=c.error,l=c.loading,d=Mt.b().shape({email:Mt.c().email().required(),password:Mt.c().required()});return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("div",{className:"max-w-sm m-auto bg-bg rounded-t-2xl rounded-b-lg px-10 py-6 mt-20",children:[Object(ne.jsx)("p",{className:"text-lg font-bold",children:"Sign in"}),Object(ne.jsx)("p",{className:"text-sm mt-0.5",children:"Sign in to your account to continue"})]}),Object(ne.jsx)("div",{className:"max-w-sm m-auto bg-bg rounded-lg pt-8 pb-10 px-10 mt-0.5",children:Object(ne.jsx)(Ut.d,{initialValues:{email:"",password:""},validationSchema:d,onSubmit:function(e){s(e)},children:function(e){var t;return Object(ne.jsxs)("form",{onSubmit:e.handleSubmit,className:"text-left",children:[Object(ne.jsx)(Ut.a,{name:"email",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-sm font-semibold px-1 flex justify-between",children:[Object(ne.jsx)("span",{children:"Email"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Enter your email here",fullWidth:!0,error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("div",{className:"mt-4"}),Object(ne.jsx)(Ut.a,{name:"password",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-sm font-semibold px-1 flex justify-between",children:[Object(ne.jsx)("span",{children:"Password"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Password",fullWidth:!0,type:"password",error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("div",{className:"my-2 pb-4"}),Object(ne.jsx)(Ct,{type:"submit",variant:"fill-accent",size:"large",fullWidth:!0,thick:!0,children:l?Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5}):Object(ne.jsx)("span",{children:"Sign in \u2192"})}),i?Object(ne.jsx)("div",{className:"text-error mt-4 text-center text-sm",children:null===(t=i.response)||void 0===t?void 0:t.data.message}):null]})}})}),Object(ne.jsxs)("div",{className:"max-w-sm m-auto bg-bg rounded-b-2xl rounded-t-lg px-10 py-3 mt-0.5 flex",children:[Object(ne.jsx)("span",{className:"text-sm mt-0.5 flex flex-1",children:"Don't have an account?"}),Object(ne.jsx)(Ct,{type:"button",onClick:function(){return t("/signup")},variant:"text-accent",size:"regular",children:Object(ne.jsx)("span",{children:"Sign up \u2192"})})]})]})},dr=n(355),jr=n.n(dr),br=function(){var e=Object(te.h)(),t=Ne(ar,{onSuccess:function(t,n){e("/signup?email=".concat(null===n||void 0===n?void 0:n.email,"&step=2"))}}),n=t.mutate,a=t.response,c=t.error,s=t.loading;Object(r.useEffect)((function(){}),[a]);var i=Mt.b().shape({email:Mt.c().email().required(),firstName:Mt.c().required(),lastName:Mt.c().required(),organisationName:Mt.c().required()});return Object(ne.jsx)(Ut.d,{initialValues:{email:"",firstName:"",lastName:"",organisationName:""},validationSchema:i,onSubmit:function(e){n(e)},children:function(e){var t;return Object(ne.jsxs)("form",{onSubmit:e.handleSubmit,className:"text-left",children:[Object(ne.jsx)(Ut.a,{name:"email",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-sm font-semibold px-1 flex justify-between",children:[Object(ne.jsx)("span",{children:"Email"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Enter your email here",fullWidth:!0,error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("div",{className:"mt-4"}),Object(ne.jsxs)("p",{className:"text-sm font-semibold px-1 flex justify-between",children:[Object(ne.jsx)("span",{children:"Name"}),(e.touched.firstName&&Boolean(e.errors.firstName)||e.touched.lastName&&Boolean(e.errors.lastName))&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsxs)("div",{className:"flex",children:[Object(ne.jsx)(Ut.a,{name:"firstName",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"First Name",fullWidth:!0,error:a&&Boolean(r)}))}}),Object(ne.jsx)("span",{className:"px-1"}),Object(ne.jsx)(Ut.a,{name:"lastName",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Last Name",fullWidth:!0,error:a&&Boolean(r)}))}})]}),Object(ne.jsx)("div",{className:"mt-4"}),Object(ne.jsx)(Ut.a,{name:"organisationName",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-sm font-semibold px-1 flex justify-between",children:[Object(ne.jsx)("span",{children:"Organisation"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Name of your organisation",fullWidth:!0,error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("div",{className:"my-2 pb-4"}),Object(ne.jsx)(Ct,{type:"submit",variant:"fill-accent",size:"large",fullWidth:!0,thick:!0,children:s?Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5}):Object(ne.jsx)("span",{children:"Next \u2192"})}),c?Object(ne.jsx)("div",{className:"text-error mt-4 text-center text-sm",children:null===(t=c.response)||void 0===t?void 0:t.data.message}):null]})}})},ur=function(){var e=Object(te.h)(),t=Object(o.b)(),n=new URLSearchParams(Object(te.g)().search),a=Ne(rr),c=a.mutate,s=a.response,i=a.loading;Object(r.useEffect)((function(){var n;s&&(or(s.data.token),t((n=s.data,{type:O,payload:n})),e("/signup?step=3"))}),[s]);var l=Mt.b().shape({otp:Mt.c().required()});return Object(ne.jsx)(Ut.d,{initialValues:{otp:""},validationSchema:l,onSubmit:function(e){c({email:n.get("email"),otp:e.otp})},children:function(e){return Object(ne.jsxs)("form",{onSubmit:e.handleSubmit,className:"text-left",children:[Object(ne.jsx)(Ut.a,{name:"otp",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-sm font-semibold px-1 flex justify-between",children:[Object(ne.jsx)("span",{children:"Enter OTP"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Enter OTP here",fullWidth:!0,error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("div",{className:"my-2 pb-4"}),Object(ne.jsx)(Ct,{type:"submit",variant:"fill-accent",size:"large",fullWidth:!0,thick:!0,children:i?Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5}):Object(ne.jsx)("span",{children:"Next \u2192"})})]})}})},mr=function(){var e=Object(te.h)(),t=Object(o.b)(),n=Ne(cr,{onSuccess:function(){t({type:p}),e("/org")}}),a=n.mutate,r=n.loading,c=Mt.b().shape({password:Mt.c().required(),rePassword:Mt.c().required()});return Object(ne.jsx)(Ut.d,{initialValues:{password:"",rePassword:""},validationSchema:c,onSubmit:function(e){a({password:e.password})},children:function(e){return Object(ne.jsxs)("form",{onSubmit:e.handleSubmit,className:"text-left",children:[Object(ne.jsx)(Ut.a,{name:"password",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-sm font-semibold px-1 flex justify-between",children:[Object(ne.jsx)("span",{children:"Password"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Enter Passowrd here",fullWidth:!0,type:"password",error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("div",{className:"mt-4"}),Object(ne.jsx)(Ut.a,{name:"rePassword",children:function(e){var t=e.field,n=e.meta,a=n.touched,r=n.error;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("p",{className:"text-sm font-semibold px-1 flex justify-between",children:[Object(ne.jsx)("span",{children:"Confirm Password"}),a&&Boolean(r)&&Object(ne.jsx)("span",{className:"text-error font-normal",children:"Required*"})]}),Object(ne.jsx)(pt,Object(x.a)(Object(x.a)({},t),{},{placeholder:"Re enter the password",fullWidth:!0,type:"password",error:a&&Boolean(r)}))]})}}),Object(ne.jsx)("div",{className:"my-2 pb-4"}),Object(ne.jsx)(Ct,{type:"submit",variant:"fill-accent",size:"large",fullWidth:!0,thick:!0,children:r?Object(ne.jsx)(Jt.a,{color:"secondary",size:20,thickness:5}):Object(ne.jsx)("span",{children:"Confirm \u2192"})})]})}})},xr=function(){var e=Object(te.h)(),t=new URLSearchParams(Object(te.g)().search).get("step");return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("div",{className:"max-w-sm m-auto bg-bg rounded-t-2xl rounded-b-lg px-10 py-6 mt-20 flex",children:[("2"===t||"3"===t)&&Object(ne.jsx)("div",{className:"-ml-3 pr-1",children:Object(ne.jsx)(_e.a,{onClick:function(){return e(-1)},"aria-label":"delete",size:"small",color:"secondary",edge:"start",children:Object(ne.jsx)(jr.a,{style:{fontSize:24}})})}),Object(ne.jsxs)("div",{className:"pl-1",children:[Object(ne.jsx)("p",{className:"text-base font-bold",children:"3"===t?"Set Password":"2"===t?"Enter OTP":"Sign up to ediflo"}),Object(ne.jsx)("p",{className:"text-sm mt-0.5 text-grey-5",children:"3"===t?"Set password to complete sign up":"2"===t?"Check your email for OTP":"Sign up and create your organisation"})]})]}),Object(ne.jsx)("div",{className:"max-w-sm m-auto bg-bg rounded-lg pt-8 pb-10 px-10 mt-0.5",children:"3"===t?Object(ne.jsx)(mr,{}):"2"===t?Object(ne.jsx)(ur,{}):Object(ne.jsx)(br,{})}),Object(ne.jsxs)("div",{className:"max-w-sm m-auto bg-bg rounded-b-2xl rounded-t-lg px-10 py-3 mt-0.5 flex",children:[Object(ne.jsx)("span",{className:"text-sm mt-0.5 flex flex-1",children:"Already have an account?"}),Object(ne.jsx)(Ct,{type:"button",onClick:function(){return e("/signin")},variant:"text-accent",size:"regular",children:Object(ne.jsx)("span",{children:"Sign in \u2192"})})]})]})},fr=function(){return Object(ne.jsx)("div",{className:"app-root",children:Object(ne.jsxs)(te.e,{children:[Object(ne.jsxs)(te.c,{path:"/",element:Object(ne.jsx)(ae,{children:Object(ne.jsx)(ce,{})}),children:[Object(ne.jsx)(te.c,{index:!0,element:Object(ne.jsx)(lr,{})}),Object(ne.jsx)(te.c,{path:"signin",element:Object(ne.jsx)(lr,{})}),Object(ne.jsx)(te.c,{path:"signup",element:Object(ne.jsx)(xr,{})})]}),Object(ne.jsxs)(te.c,{path:"org",element:Object(ne.jsx)(re,{children:Object(ne.jsx)(te.b,{})}),children:[Object(ne.jsx)(te.c,{index:!0,element:Object(ne.jsx)(Na,{})}),Object(ne.jsx)(te.c,{path:":orgId",element:Object(ne.jsx)(Na,{}),children:Object(ne.jsxs)(te.c,{path:"project",element:Object(ne.jsx)(te.b,{}),children:[Object(ne.jsx)(te.c,{index:!0,element:Object(ne.jsx)(nr,{})}),Object(ne.jsx)(te.c,{path:":projectId",element:Object(ne.jsx)(nr,{})})]})}),Object(ne.jsx)(te.c,{})]}),Object(ne.jsx)(te.c,{path:"player/:videoId",element:Object(ne.jsx)(re,{children:Object(ne.jsx)(ta,{})})})]})})},hr=function(){var e=Object(r.useState)(!1),t=Object(Q.a)(e,2),n=t[0],a=t[1],c=Object(Z.a)({typography:{fontFamily:'-apple-system, BlinkMacSystemFont, "roboto", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"'},palette:{primary:{main:"#005FEB"},secondary:{main:"#ffffff"}},overrides:{MuiAvatar:{colorDefault:{color:"#747474"}},MuiSlider:{root:{color:"var(--slider-color)"}},MuiRadio:{root:{padding:5}},MuiFormControlLabel:{root:{marginLeft:-5}},MuiButton:{root:{borderRadius:8,fontSize:"var(--font-regular)"},label:{textTransform:"none",fontWeight:"bold"},containedPrimary:{"&:hover":{backgroundColor:"#5393F2"},"&:active":{backgroundColor:"#1868DF"}},text:{color:"#fff","&:active":{opacity:.8}},endIcon:{marginLeft:5,marginRight:0}},MuiCheckbox:{root:{color:"var(--checkbox-unchecked)",fontSize:18,"&:checked":{color:"var(--accent)"}}},MuiFilledInput:{root:{backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"},"&:focused":{backgroundColor:"transparent",border:"2px solid red"}},underline:{"&:before":{display:"none"},"&:after":{display:"none"}}},MuiChip:{root:{fontSize:"1rem",borderRadius:5,backgroundColor:"var(--accent-shade)"},deletable:{fontWeight:600,color:"var(--accent)",marginRight:10,"&:active":{backgroundColor:"var(--accent-shade)",opacity:.8},"&:focus":{backgroundColor:"var(--accent-shade)"}},deleteIcon:{color:"var(--accent)",height:18,width:18,"&:hover":{color:"var(--accent)",opacity:.8}}},MuiTypography:{root:{color:"var(--text-primary)"},body2:{fontSize:13},h5:{fontWeight:600,fontSize:"var(--font-large)"},h6:{fontWeight:600,fontSize:"var(--font-semilarge)"}},MuiPaper:{root:{backgroundColor:"var(--bg-opaque)"},rounded:{borderRadius:"0.75rem"},elevation8:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.1), 0px 8px 10px 1px rgba(0,0,0,0.14), 0px 3px 14px 2px rgba(0,0,0,0.12)"}},MuiMenuItem:{root:{color:"var(--text-primary)","&:hover":{backgroundColor:"var(--background-secondary)"}}},MuiBreadcrumbs:{root:{color:"var(--text-secondary)"}}},props:{MuiButton:{disableElevation:!0,disableRipple:!0},MuiCheckbox:{icon:Object(ne.jsx)("span",{className:"pficon-unchecked-round"}),checkedIcon:Object(ne.jsx)("span",{className:"pficon-checked-round"}),size:"small"}}}),s=Object(o.c)((function(e){return e.authReducer}));return Object(r.useEffect)((function(){s.authenticated?or(s.token):or(),a(!0)}),[s.authenticated]),Object(ne.jsx)(ee.a,{theme:c,children:Object(ne.jsx)(Ye,{children:n&&Object(ne.jsx)(fr,{})})})},Or=n(356),pr=$.store,gr=$.persistor,vr=function(){return document.documentElement.className="dark-theme",Object(ne.jsx)(l.a,{children:Object(ne.jsx)(o.a,{store:pr,children:Object(ne.jsx)(Or.a,{loading:null,persistor:gr,children:Object(ne.jsx)(hr,{})})})})},Nr=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1131)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};i.a.render(Object(ne.jsx)(c.a.StrictMode,{children:Object(ne.jsx)(vr,{})}),document.getElementById("root")),Nr()},195:function(e,t){},210:function(e,t,n){e.exports={volumeSlider:"player_volumeSlider__-WI6K",volumeConrolWrap:"player_volumeConrolWrap__x5hDJ"}},382:function(e,t,n){},387:function(e,t,n){},388:function(e,t,n){},416:function(e,t){},89:function(e,t,n){e.exports={button:"text-button_button__3D6eT",buttonText:"text-button_buttonText__1ePr8",round:"text-button_round__2m8-H",thick:"text-button_thick__1Ddsh",fullWidth:"text-button_fullWidth__3yh7K",spacer:"text-button_spacer__2M6Cx","text-primary":"text-button_text-primary__1F1Jy","text-grey":"text-button_text-grey__1va2M","text-accent":"text-button_text-accent__3-_1P","text-error":"text-button_text-error__22DaB","text-white":"text-button_text-white__aFD1j",solid:"text-button_solid__1egT-","fill-primary":"text-button_fill-primary__3VuoG","fill-accent":"text-button_fill-accent__37LJz",medium:"text-button_medium__PfnYD",regular:"text-button_regular__1AZWu",large:"text-button_large__3ii4Y"}}},[[1053,1,2]]]);
//# sourceMappingURL=main.9c94d46c.chunk.js.map